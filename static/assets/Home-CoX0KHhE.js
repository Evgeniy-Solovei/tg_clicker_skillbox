import{r as m,a as x,s as h,j as e,f,e as n,L as v}from"./index-DcRxAu3E.js";import{f as j}from"./friends__invite-Ds21nNo3.js";import{p as u,t as N,H as b,a as T,b as y,c as H,S,d as C}from"./ticket-BncCA1Bf.js";import{g as k}from"./getUser-DJBpJkua.js";import{g as $}from"./getCurrTicket-unHkMUTY.js";import{u as w}from"./index-DXTaARzJ.js";import{c as B}from"./SlidingPanel-xHXvuc0U.js";const F="_home__section_ud60n_1",O="_imgBoxy_ud60n_6",E="_img__mobile_ud60n_15",l={home__section:F,imgBoxy:O,img__mobile:E},I="_home__grid_9o10g_1",L="_home__title_9o10g_38",M="_home__label_9o10g_46",Q="_home__link_9o10g_58",R="_reverse_9o10g_82",q="_tickets__switcher_9o10g_91",A="_home__ticket_9o10g_113",D="_home__info_9o10g_122",G="_label__tickets_9o10g_130",P="_active_9o10g_143",U="_active_blue_9o10g_154",z="_imgTicket_9o10g_165",J="_home__task_nav_9o10g_170",s={home__grid:I,home__title:L,home__label:M,home__link:Q,reverse:R,tickets__switcher:q,home__ticket:A,home__info:D,label__tickets:G,active:P,active_blue:U,imgTicket:z,home__task_nav:J};function g(t){return t===1?"билет":t>=2&&t<5?"билета":"билетов"}const K=({user:t})=>{const[i,c]=m.useState("regular"),a=x();return m.useEffect(()=>{a(h(!0))},[]),e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:`${i==="premium"?`${s.label__tickets} ${s.active_blue}`:s.label__tickets}`,htmlFor:"premium-tickets",children:[e.jsx("span",{className:s.home__ticket,children:t==null?void 0:t.premium_tickets}),e.jsx("span",{className:s.home__info,children:t&&g(t==null?void 0:t.premium_tickets)}),e.jsx("img",{className:s.imgTicket,src:u,alt:""}),e.jsx("input",{checked:i==="premium",onChange:()=>{c("premium")},onClick:()=>{a(f(!1))},name:"tickets",type:"radio"})]}),e.jsxs("label",{className:`${i==="regular"?`${s.label__tickets} ${s.active}`:s.label__tickets}`,htmlFor:"tickets",children:[e.jsx("span",{className:s.home__ticket,children:t==null?void 0:t.tickets}),e.jsx("span",{className:s.home__info,children:t&&g(t==null?void 0:t.tickets)}),e.jsx("img",{className:s.imgTicket,src:N,alt:""}),e.jsx("input",{checked:i==="regular",onChange:()=>{c("regular")},onClick:()=>{a(h(!0))},id:"tickets",name:"tickets",type:"radio"})]})]})},V=[{id:1,title:"Лидерборд",path:"leaderboard",svg:e.jsx(b,{})},{id:2,title:"Каталог",path:"catalog",svg:e.jsx(T,{}),reverse:!0},{id:3,title:"Задания",path:"tasks",svg:e.jsx(y,{className:s.home__task_nav}),reverse:!0},{id:4,title:"Друзей",path:"friends",svg:e.jsx(H,{className:s.home__task_nav})}],W=()=>{const t=n(k);return e.jsxs("ul",{className:s.home__grid,children:[V.map(i=>e.jsx("li",{children:e.jsxs(v,{className:s.home__link,to:i.path,children:[i.title==="Лидерборд"&&e.jsxs("p",{className:s.home__label,children:["#",t==null?void 0:t.rank]}),i.title==="Друзей"&&e.jsx("p",{className:s.home__label,children:t==null?void 0:t.friends_count}),e.jsxs("div",{className:i.reverse?s.reverse:void 0,children:[e.jsx("p",{className:s.home__title,children:i.title}),i.svg]})]})},i.id)),e.jsx("li",{className:s.tickets__switcher,children:e.jsx(K,{user:t})})]})},_e=()=>{const[t,i]=m.useState(!1),[c,a]=m.useState(!1),_=n(k),o=n($),d=w({query:"(max-height: 720px)"}),p=()=>{_&&((_==null?void 0:_.tickets)>0&&o===!0||_.premium_tickets>0&&o===!1?i(!0):((_==null?void 0:_.tickets)<=0&&o===!0||_.premium_tickets>=0&&o===!1)&&a(!0))},r=()=>{i(!1),a(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:l.home__section,children:[e.jsx(W,{}),e.jsx("img",{onClick:p,className:d?B(l.img__mobile,l.imgBoxy):l.imgBoxy,src:j,alt:"скиллбокс"})]}),e.jsx(S,{user:_,fullHeight:"75vh",initialHeight:"75%",onClose:r,isOpen:t}),e.jsx(C,{fullHeight:"40vh",initialHeight:"40%",isOpen:c,onClose:r})]})};export{_e as default};
