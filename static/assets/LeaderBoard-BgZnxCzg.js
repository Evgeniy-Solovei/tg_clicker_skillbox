import{u as b,j as e,r as g,e as u}from"./index-BXvIbvR9.js";import{u as x}from"./useSuspenseQuery-DMwfkl0o.js";import{a as h,L as j,P as f}from"./avatar-CRWdlj5_.js";import{a as k,b as N,i as y,q as C}from"./coin-C4NZrf3P.js";import{g as v}from"./getUser-DJBpJkua.js";import{S as O}from"./SlidingPanel-DUq-jg5e.js";import{f as L}from"./formatNumber-B2gvpCqi.js";import"./useBaseQuery-Y2aCGemD.js";function S(a){return k.get(`${N}/api/top100/${a}/`).then(_=>_.data).catch(_=>{console.log(_)})}const $="_leader__section_jimd4_1",F="_leader__title_jimd4_6",H="_page__list_jimd4_16",c={leader__section:$,leader__title:F,page__list:H},P="/assets/sliding__prize-BXPTTzfC.webp",q="_sliding__button_e49lx_1",z="_sliding__block_e49lx_11",I="_sliding__image_e49lx_23",T="_sliding__title_e49lx_27",w="_sliding__label_e49lx_37",d={sliding__button:q,sliding__block:z,sliding__image:I,sliding__title:T,sliding__label:w},E=({initialHeight:a,fullHeight:_,isOpen:r,onClose:t})=>{const{tg:l}=b();return e.jsx(O,{darkened:!0,initialHeight:a,fullHeight:_,isOpen:r,onClose:t,children:e.jsxs("div",{className:d.sliding__block,children:[e.jsx("img",{width:196,height:196,className:d.sliding__image,src:P,alt:""}),e.jsx("h3",{className:d.sliding__title,children:"Супер-приз ждет тебя!"}),e.jsx("p",{className:d.sliding__label,children:"15 декабря игрок, который наберет наибольшее количество баллов, получит супер-приз — iPhone 16!"}),e.jsx("button",{onClick:()=>{t(),l.HapticFeedback.impactOccurred("light")},className:d.sliding__button,children:"Ура!"})]})})},U="_leaderboard__item_10r0b_1",B="_back_10r0b_9",G="_leaderboard__avatar_10r0b_13",K="_leaderboard__name_10r0b_19",M="_leaderboard__coins_10r0b_27",Q="_iconCoin_10r0b_35",R="_leaderboard__index_10r0b_40",X="_leaderboard__gift_10r0b_47",i={leaderboard__item:U,back:B,leaderboard__avatar:G,leaderboard__name:K,leaderboard__coins:M,iconCoin:Q,leaderboard__index:R,leaderboard__gift:X},A=g.memo(({id:a,name:_,points:r,index:t,openModal:l})=>{const{tg:o}=b();return e.jsxs("li",{className:t<=3?`${i.back} ${i.leaderboard__item}`:i.leaderboard__item,children:[e.jsx("span",{className:i.leaderboard__index,children:t}),e.jsx("img",{className:i.leaderboard__avatar,src:h,alt:"avatar"}),t===1&&e.jsx("button",{onClick:()=>{l(),o.HapticFeedback.impactOccurred("light")},className:i.leaderboard__gift,children:e.jsx(j,{className:i.leaderboard__svg})}),e.jsx("h2",{className:i.leaderboard__name,children:_}),e.jsx("p",{className:i.leaderboard__coins,children:L(r)}),e.jsx("img",{className:i.iconCoin,src:y,alt:""})]},a)}),_e=()=>{const a=u(v),{tg:_,tg_id:r}=b(),[t,l]=g.useState(!1),o=()=>{l(!1),_.HapticFeedback.impactOccurred("light")},m=()=>{l(!0),_.HapticFeedback.impactOccurred("light")},{data:s}=x({queryFn:()=>S(r),queryKey:["leaderboard"]},C);return e.jsxs(e.Fragment,{children:[e.jsx(f,{className:c.leader__section,className__title:c.leader__title,place:s==null?void 0:s.player_rank,name:a==null?void 0:a.name,coins:a==null?void 0:a.points_all,gift:Number(s==null?void 0:s.player_rank)===1,title:"Leaderboard",time:"До конца осталось: 12 дней 8 часов",isOpen:m,children:e.jsx("ul",{className:c.page__list,children:s==null?void 0:s.top_players.map((n,p)=>e.jsx(A,{openModal:m,index:p+1,id:n.tg_id,name:n.name,points:n.points},n.tg_id))})}),e.jsx(E,{isOpen:t,onClose:o,initialHeight:"70%",fullHeight:"70vh"})]})};export{_e as default};
