import{r as f,j as a,e as x,u as y}from"./index-B803nQuE.js";import{u as b}from"./useQuery-686qBcbK.js";import{a as C,b as w,q as v}from"./queryClient-BNtJhuGz.js";import{i as S}from"./coin-DlK3Y3AM.js";import{l as k}from"./logo-exXQDy5k.js";import{H as z}from"./HeaderCoinSvg-CDfZayND.js";import{g as j}from"./getUser-DJBpJkua.js";import{S as B}from"./SlidingPanel-DNIFl_-J.js";import"./Portal-B4jrE5Cy.js";const q="_catalog__section_p0z47_1",H="_catalog__header_p0z47_6",M="_reverse_p0z47_15",D="_catalog__button_p0z47_33",F="_catalog__image_p0z47_42",$="_catalog__list_p0z47_48",E="_category__caption_p0z47_53",O="_catalog__title_p0z47_79",n={catalog__section:q,catalog__header:H,reverse:M,catalog__button:D,catalog__image:F,catalog__list:$,category__caption:E,catalog__title:O};function P(t){return C.get(`${w}/api/shop/product-list/${t}/`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}}).then(s=>s.data).catch(s=>{console.log(s)})}const Q="_catalog__item_49fw7_1",R="_catalog__upper_49fw7_19",T="_catalog__price_49fw7_24",U="_catalog__info_49fw7_31",G="_catalog__down_49fw7_39",K="_catalog__img_49fw7_45",L="_catalog__profession_49fw7_54",W="_catalog__prof_49fw7_54",l={catalog__item:Q,catalog__upper:R,catalog__price:T,catalog__info:U,catalog__down:G,catalog__img:K,catalog__profession:L,catalog__prof:W},X="/assets/iconBook-Dt4xzM-P.png",Z="/assets/sale5-BHXnLRWG.png",A="/assets/sale10-DNBte8BQ.png",p="/assets/useful_materials-Cfmv-Iql.png",h="/assets/miniCurs-DjvlySZB.png",J="/assets/iconMerch-BICvc0cD.png",V=(t,s)=>{switch(t){case"Пройдите профтест на ....":return s(X);case"Скидка 5% на все курсы":return s(Z);case"Скидка 10% на все курсы":return s(A);case"Python-разработчик":return s(p);case"Бизнес-аналитик":return s(p);case"Веб-дизайнер":return s(p);case"40 правил идеального текста для соцсетей":return s(p);case"Как найти клиентов фрилансеру":return s(p);case"Введение в программирование":return s(h);case"Введение в маркетинг":return s(h);case"Введение в дизайн":return s(h);case"Эксклюзивная байка":return s(J)}},Y=t=>{if(typeof t=="number")return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},u=({id:t,name:s,price:o,description:g,prof:c})=>{const[m,i]=f.useState();return f.useEffect(()=>{V(s,i)},[s]),a.jsxs("li",{className:l.catalog__item,children:[a.jsxs("div",{className:l.catalog__upper,children:[a.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"8px"},className:l.catalog__price,children:[o!=="Бесплатно"?a.jsx("img",{width:43,height:43,src:S,alt:"coin"}):null,Y(o)]}),a.jsx("h2",{className:l.catalog__info,children:s}),a.jsx("p",{className:l.catalog__prof,children:c})]}),a.jsxs("div",{className:l.catalog__down,children:[a.jsx("img",{className:l.catalog__img,src:m,alt:"предмет каталога"}),a.jsx("span",{className:l.catalog__profession,children:g})]})]},t)},I="_sliding__button_1afla_1",aa="_sliding__block_1afla_9",sa="_sliding__image_1afla_22",ta="_sliding__title_1afla_26",_a="_sliding__label_1afla_34",ea="_sliding__span_1afla_45",ia="_sliding__money_1afla_54",na="_sliding__coins_1afla_60",r={sliding__button:I,sliding__block:aa,sliding__image:sa,sliding__title:ta,sliding__label:_a,sliding__span:ea,sliding__money:ia,sliding__coins:na},la="/assets/sliding__catalog-_ahktps_.png",oa=({isOpen:t,onClose:s,initialHeight:o,fullHeight:g})=>{const c=x(j);return a.jsx(B,{darkened:!0,isOpen:t,onClose:s,initialHeight:o,fullHeight:g,children:a.jsxs("div",{className:r.sliding__block,children:[a.jsxs("div",{className:r.sliding__money,children:[a.jsx("img",{width:277,height:90,src:la,alt:""}),a.jsx("span",{className:r.sliding__coins,children:c==null?void 0:c.points_all})]}),a.jsx("h2",{className:r.sliding__title,children:"У тебя есть баллы!"}),a.jsx("p",{className:r.sliding__label,children:"Обменяй их на бонусы в нашем магазине"}),a.jsx("p",{className:r.sliding__span,children:"*Важно: когда ты тратишь баллы в магазине, твой рейтинг в лидерборде не меняется!"}),a.jsx("button",{onClick:s,className:r.sliding__button,children:"Понятно"})]})})},ja=()=>{const{tg_id:t}=y(),s=x(j),[o,g]=f.useState(!1),c=()=>{g(!1)},m=()=>{g(!0)},{data:i}=b({queryFn:()=>P(t),queryKey:["catalog"]},v),N=["Каталог","Скидки","Полезные материалы","Мини-курсы","Мерч"].filter(e=>e!=="Каталог");return a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:n.catalog__section,children:[a.jsxs("div",{className:n.catalog__header,children:[a.jsx("button",{onClick:m,className:n.catalog__button,children:"Информация"}),a.jsx("img",{width:69,height:15,className:n.catalog__image,src:k,alt:""}),a.jsxs("p",{className:n.reverse,children:[a.jsx("span",{children:s==null?void 0:s.points}),a.jsx(z,{})]})]}),a.jsx("h1",{className:n.catalog__title,children:"Каталог"}),a.jsxs("ul",{className:n.catalog__list,children:[i==null?void 0:i.shops.filter(e=>e.name==="Каталог").map(e=>e.products.map(_=>a.jsx(u,{prof:_.description,id:_.id,name:_.name,price:typeof _.price=="number"?"Бесплатно":_.price,description:e.description},_.id))),N.map(e=>a.jsxs(a.Fragment,{children:[a.jsx("li",{style:{margin:"30px 0"},children:a.jsx("h2",{className:n.category__caption,children:e})}),i==null?void 0:i.shops.filter(_=>_.name===e).map(_=>_.products.map(d=>a.jsx(a.Fragment,{children:a.jsx(u,{id:d.id,name:d.name,price:d.price,prof:d.description,description:_.description},d.id)})))]}))]})]}),a.jsx(oa,{fullHeight:"70vh",initialHeight:"70%",isOpen:o,onClose:c})]})};export{ja as default};
