import{u as I,r as A,j as e,b as Z}from"./index-BXvIbvR9.js";import{u as z}from"./useSuspenseQuery-DMwfkl0o.js";import{a as b,b as h,q as g,i as Q}from"./coin-C4NZrf3P.js";import{S as U}from"./SlidingPanel-DUq-jg5e.js";import{u as f}from"./useMutation-KymNvUJE.js";import{u as K}from"./index-DdbjsfNi.js";import"./useBaseQuery-Y2aCGemD.js";const T="_task__section_168yp_1",O="_tasks_list_168yp_6",G="_task_title_168yp_10",D="_task__item_168yp_19",J="_coins_box_168yp_32",P="_task_name_168yp_38",V="_coins_168yp_32",W="_icon_168yp_54",q="_task_heading_168yp_62",x={task__section:T,tasks_list:O,task_title:G,task__item:D,coins_box:J,task_name:P,coins:V,icon:W,task_heading:q};function L(s){return b.get(`${h}/api/tasks/${s}/`).then(t=>t.data).catch(t=>{console.log(t)})}const X=(s,t)=>b.post(`${h}/api/tasks_tg/`,{tg_id:s,task_dop_name:t}).then(c=>c.data).catch(c=>c),$=(s,t)=>b.post(`${h}/api/tasks/start/${s}/${t}/`).then(c=>c.data).catch(c=>c),ee=(s,t)=>b.post(`${h}/api/tasks/${s}/${t}/`).then(c=>c.data).catch(c=>c),se=(s,t,c,_)=>b.post(`${h}/api/task_info/`,{tg_id:s,country:t,name_player:c,phone:_}).then(a=>a.data).catch(a=>a),te="_task_title_z41si_1",ne="_task_item_z41si_10",ae="_task_name_z41si_26",ie="_coins_box_z41si_34",ce="_task_btn_z41si_42",oe="_task_compl_btn_z41si_59",Ae="_coins_z41si_34",re="_icon_z41si_82",_e="_coin_img_z41si_90",le="_iconLock_z41si_95",u={task_title:te,task_item:ne,task_name:ae,coins_box:ie,task_btn:ce,task_compl_btn:oe,coins:Ae,icon:re,coin_img:_e,iconLock:le},me="/assets/iconInst-KKVCkHXf.png",ue="/assets/refFriend-ClCxNyvZ.png",R="/assets/iconTel-B2YMwMca.png",de="/assets/iconS-B6ipBvZu.png",ge="/assets/iconHeartY-D2heBaz7.png",ke="/assets/iconWebinar-CLWn8zyl.png",pe="/assets/iconYoutube-iurrvn-W.png",xe="/assets/imgFirstTask-BQIMGM7V.png",be=(s,t)=>{switch(s){case"instagram":return t(me);case"friend":return t(ue);case"tg_by":return t(R);case"tg_kz":return t(R);case"tg_uz":return t(R);case"telegram_bot":return t(de);case"youtube_video":return t(ge);case"webinar":return t(ke);case"youtube":return t(pe);case"anketa":return t(xe)}},he="_sliding__block_1efxk_1",ye="_name_title_1efxk_14",fe="_coin_box_1efxk_23",je="_img_coin_1efxk_30",Be="_coins_1efxk_35",Ce="_btn_1efxk_43",Re="_text_info_1efxk_58",Se="_btn_check_1efxk_67",Fe="_form_box_1efxk_82",Ie="_input_name_1efxk_89",Ne="_select_region_1efxk_125",Ee="_btn_submit_1efxk_144",Ye="_input_box_1efxk_158",Qe="_icon_input_1efxk_165",ve="_iconCheckbox_1efxk_174",we="_agreement_box_1efxk_180",He="_agreement_text_1efxk_184",Me="_link_agr_1efxk_191",i={sliding__block:he,name_title:ye,coin_box:fe,img_coin:je,coins:Be,btn:Ce,text_info:Re,btn_check:Se,form_box:Fe,input_name:Ie,select_region:Ne,btn_submit:Ee,input_box:Ye,icon_input:Qe,iconCheckbox:ve,agreement_box:we,agreement_text:He,link_agr:Me},Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJISURBVHgB7ZjfahNBFMa/M9tNK1gbEDRS/2xBavHGvIHbJ7Bv0HjplfQNeukreNX4Br5B0zeIdyKCIygNgjjBf8HtznEGE+lF22xmT2gL84NlWXbYnW/mnDnfDBCJRCKRSCRy4SDMidbt+49JJW0GN//9iExZcu/L53dvMAfEhbRaGxnSco+I8pPeM6CpKPLDww8fIYiCNA27f5oIjxu5jNO012xmTQgiKqR1d33bd3RaO99m8Vq6DUFEhRBjq3rj02ctBNnQoumz8f/HjDYEEc4REo37WZBP9nPiPIUYCCIsxL6u2tIVyj4EERXCiisLgU1eQRBRIQP9/sCtXFPFuNnoDj697UEQ8RxZpD9P3e2MsOH+SBU7ECaBMMaY0Y/h15dXV65jXOXHphHG+awXTsQzo7Voos8F76G88508t7KNzF+T5xur64+kfZZHxP36jjPRFvlr7LWsDy+2u2yVThqF4TLNwdyZGErrQsxZmj4dHe1KOOFaQvzIXllu7LmvVPdYJ8DM3dH3YseY8JBbQA2cg913t9qeyc1SZ2k5zVyJ3EQgwauWt+wKJGb8fMjdvPPgCQIJFjKTZa+K4g4CCRdCyCFMHWsfLITH9UGYDIEECTleF6S5tbZ2DwHE/chFI0jIEka+cGnIo39/4yECCBKineljpTZdwnchBVEPSZGHVvfaXssnPtvyeeIKGs+4fLolvG/Z7V+UOhjoevsT8SPT1exhu4RtokRGxCvHz36ZaUiJNQoL+id+6Uth5yORSCQSiUTC+QvVX7KMdrq20AAAAABJRU5ErkJggg==",ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQwSURBVHgB7ZgxcxtFFMff20MhGTvWyRB8gtg5zdjGnU2XLkpFOouODuUTQDq6iA4qzDdwPgGidGX5E0R0WDajk8A5w0ySsxFjW5H28VZ2iKKcdafdy0yK+8145mZ1u77/7tu3/7cAKSkpKSkpKSnvHAgJ49xcvEOIJR65KABdbrL5LyCiOgHURa+34fvNFiRMYkKUAECsIGIx6l0WtYm9XiVJQYkIcRYWHyKICkwEBZKo/Ncf+79AAlhgSH5+6UdE8S1MDF7l1ftyOmt7naPnv4IhRiuitxKjUNDvY/Hvg4aRGAGaOM6KGy0CPd43NZ6tYMw7thC0AYZoC4GMfHjpbwhVsF64fnu34Ld27z5pN3IkxF3+xQt9nRPEIFkYoC+E02tYM0mo+K3GF37z9Yx06P1We190P+PHeuh4AstggNYecdzFOyhFLeQnz283Cnp9KfDbeznQRGtFRN+yw9r5wNuECA69/R0IXRW0bdu1QRMtIRLwspnzIAZ0SXhdy2EWNNHfIwYgQejMnzynI9BES4gl+6EzSgQliAEhrIW0BkHgBaCJlpCDg7162NkgEEr5fOHWuL75haWvua872i75vAEDtEOLgDZD2zOZ2mVi5uYX1zmwQg8/DrcqGKBtUcakYFBhQurD2OVKEgEKyS4AvxnjjCPTdhRGXit/a/lniLkvxsFZrHzYbjwCA4yyFqF4MN5HxYD3hqkIhZEQth0eqymDPh6IbhkSwLge+ef46e509gMVo0WYEGFB8Unz911IAC0hH32yvHo9m1vpHD8bGMPO0dOd69lZPuTwdtwx1L5gc7mlnpU1yd748POZqexppxNoHYoThZazsPyVM7+0bVlQRyFqzs3l/608G74H/HGVOOOMbu5rM1e2BYoqZDKeGl/H0scSooqouYWlxxw+m8MplJBesxr8cd+NE6MSgyRZGt3cw6lTja8maY5LaJiAWKE1PTv7mK92VoY/iD/4+zPrxQ+nQXA6/O5FmHEmw3sjw3i8J+75rb2d0fGncje2+Myx8fzqyL4QdHtqZtb+9/jZFsQg8hz5eP7TdZ75l6eux5XefVUkRfVzXC6FpdwGZUe4YjzB7v3Ai/ZSHL58D/BqVU+Ou7k4HiwytIYtO99HeXh21oQYqNSsTmsWXlAVYxwRCqsPVRoqB+Ja+8gVcV3X7sorTbpY8sE/Iaop+3H45/4OJIDKWlen31sNueCLbV1iWRSVrTC8+htcharTmUjW2fgFmOl7qq4IC4d84dxMyp61xndhNvdd43H5GZWtH61RPL7AKI7W/kZCBmI45kFKFb9leIsMMhvAxqno/hQ3HC/6Tcb5JqZ17lni8CpCAgyyIGKd47Z6Is4eTSJgaAwzWFiRha1yfWK/DBHkZyJ8o5xFZHvPl3ZIpGad95po8QFQG3i2lJSUlJSUFHP+A/r1rP82Q9R+AAAAAElFTkSuQmCC",Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKRSURBVHgB7ZhNTttAFIDfG8sCmj+XtFVQ/4yKELvmBuQIuQFh2R03KL0BnKDpsrv0BDXL7siuCpUwoCqpVCIHuatQT+dFiuTSOvaMjY3QfCtH7zmabzzz/MYAGo1Go9FoNHcOBEUsy7ZWqks7HLiF02l3ODw9gwJREiGJpar5mQE26TcHcIVMq0gZaZGbEnOKlpESiZKYU6QMk0leqZhvoyQIMSs2N01nbW39JeSMlAhHbMflzGXo6UGOSInQIJPmmZaZKDcrZEW8hKnu1Ju6kCNSIgHy47gckmUGtD3PTSqdCVIiYpM4i8IkgQa0vp8O+pAzciIscBaFi5IgpERG7rcjjtyJiv+eBrlWqjByT4Tg2I2MIe5DQRggiT+57Fdq9Y64/Gf2EdEu1Va9X5PxF8gZ+Sci4CzoRP8hHjx5uvkackZJJG6viPLby7tNURKZgcZu1AuyiJ5L+WBFNOyNbQyYExWP64Ybzza2ObI9BO7h9fV+mq5ZerOH8b3xWblWp9lo/S+OVBAM1inXHo2oSIRjjRevdhCNHiJsiSLR5IbRrjyo9nzfm4ACqUQIMcCjcrVuiwFFtPe4LITa5eqqXSnVjmmgMwkwun9lCek0MqmWVpjG8833QqYTlxdw6DGEyOOA6uEsMxEiqUwcKjKpl1YY/+ry06I9k5TZMmOs6V+NPyS9R738RjA6H7wTc7oHKREFoCWTn7kIMTw/ORQzui4uXVAk4PxAJj/TpRXG9356oqId0lITs0UVbTnpvZxD98fFyRuQ4NZE5lB5Lj18/FGMzkKAZlw+SYwuBrsgSaZVK46GvWVDEIh3yKyy2TfjqhJEriJhSAohaIoPAbN+jDPsj9yvDmg0Go1Go9HcH/4AuzvzMfyBSJsAAAAASUVORK5CYII=",Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE0SURBVHgB3ZU9UsJAGIbfb7WksIQujZ7BP5QbeIUlN/AEUmkbD6CMrfbaogmDpd7AktIDAB/7EZgJkIVZstvwzGSy2d153sn+EuY0z/iaCS14gBi9dECfs/JMfsFd89LwS5L26ZYuz/mOCB0EgBkdZeQagTDDo5V5RwgFIVLwRK1WXu8lQMfAk1km9fp62yEqIvI4zsvHJ8BwuNxe6Q+K8od7IP1a77NzwKr84728nzXANmkucmuATJZMmo6rya0BzSug0chFxRBXuVC6it5e8yFqF4SCq1wgc9CxrVEC2ivD5CIXNq6i7nP+7CoXtm60RYBsIFe5sHGIfODtsNvjAHPr/CEQZnJ/1GSCBIHgMRKVDehRLmd4Rpz9b3qhRUXrlKMR4cbco0eoAuMfB/jNMurJ5xT1OGI/lUVFwQAAAABJRU5ErkJggg==",S={by:"https://skillbox.by/consent_access.pdf",kz:"https://skillbox.kz/privacy_policy.pdf",uz:"https://skillbox.uz/privacy_policy.pdf"};function Te(s){return s===2?"Пригласить":s===11||s===12?"Смотреть":"Подписаться"}function Oe({fullHeight:s,initialHeight:t,isOpen:c,onClose:_,task:a}){const{tg:l,tg_id:r}=I(),d=n=>l.openLink(n,{try_instant_vew:!0}),k=f({mutationFn:n=>$(n.tg_id,n.don_name),onSuccess:n=>{n.start_time&&d(a.task.link)}},g),m=f({mutationFn:n=>ee(n.tg_id,n.dop_name),onSuccess:()=>{_(),g.invalidateQueries({queryKey:["tasks"]}),l.HapticFeedback.impactOccurred("medium")}},g),o=f({mutationFn:n=>X(n.tg_id,n.dop_name),onSuccess:n=>{n.message=="Пользователь не подписан на канал."||g.invalidateQueries({queryKey:["tasks"]}),_()}},g),y=()=>{a.task.link&&a.task.name!=="Подписка на телеграм"?(l.HapticFeedback.impactOccurred("medium"),k.mutate({tg_id:r,don_name:a.task.dop_name})):a.task.link&&(d(a.task.link),l.HapticFeedback.impactOccurred("medium"))},v=()=>{a.start_time?m.mutate({tg_id:r,dop_name:a.task.dop_name}):a.task.name==="Подписка на телеграм"?o.mutate({tg_id:r,dop_name:a.task.dop_name}):d(a.task.link),l.HapticFeedback.impactOccurred("medium")},[j,N]=A.useState(""),[p,E]=A.useState("by"),[B,Y]=A.useState(""),[w,C]=A.useState(""),H=f({mutationFn:n=>se(n.tg_id,n.country,n.name_player,n.phone),onSuccess:()=>{g.invalidateQueries({queryKey:["tasks"]}),N(""),E("by"),Y(""),_(),l.HapticFeedback.impactOccurred("medium")}},g);A.useEffect(()=>{switch(p){case"by":C(S.by);break;case"kz":C(S.kz);break;case"uz":C(S.uz);break}},[p]);const M=n=>{n.preventDefault(),l.HapticFeedback.impactOccurred("medium"),j&&B&&p&&H.mutate({tg_id:r,name_player:j,country:p,phone:B})};return e.jsx(U,{initialHeight:t,fullHeight:s,darkened:!0,isOpen:c,onClose:_,children:e.jsx("div",{className:i.sliding__block,children:a.task.name==="Заполни анкету"?e.jsxs("form",{className:i.form_box,onSubmit:M,children:[e.jsxs("div",{className:i.input_box,children:[e.jsx("img",{className:i.icon_input,src:Ze}),e.jsx("input",{className:i.input_name,type:"text",value:j,onChange:n=>N(n.target.value),placeholder:"Имя"})]}),e.jsxs("div",{className:i.input_box,children:[e.jsx("img",{className:i.icon_input,src:ze}),e.jsxs("select",{className:i.select_region,value:p,onChange:n=>E(n.target.value),children:[e.jsx("option",{disabled:!0,defaultValue:"Регион",children:"Регион"}),e.jsx("option",{value:"by",children:"Беларусь"}),e.jsx("option",{value:"kz",children:"Казахстан"}),e.jsx("option",{value:"uz",children:"Узбекистан"})]})]}),e.jsxs("div",{className:i.input_box,children:[e.jsx("img",{className:i.icon_input,src:Ue}),e.jsx("input",{className:i.input_name,type:"tel",value:B,onChange:n=>Y(n.target.value),placeholder:"Номер телефона"})]}),e.jsx("button",{className:i.btn_submit,type:"submit",children:"Отправить"}),e.jsxs("div",{className:i.agreement_box,children:[e.jsx("img",{src:Ke,className:i.iconCheckbox}),e.jsxs("span",{className:i.agreement_text,children:["Соглашаюсь с"," ",e.jsx("a",{className:i.link_agr,onClick:()=>d(w),children:"условиями передачи данных"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:i.name_title,children:a.task.name}),e.jsxs("div",{className:i.coin_box,children:[e.jsx("img",{className:i.img_coin,src:Q,alt:""}),e.jsx("span",{className:i.coins,children:a.task.reward_currency})]}),e.jsx("button",{onClick:y,className:i.btn,children:Te(+a.task.id)}),e.jsx("p",{className:i.text_info,children:"Оставшееся время для модерации, чтобы получить награду: 1 час"}),e.jsx("button",{onClick:v,className:i.btn_check,children:"Проверить"})," "]})})})}const Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANqSURBVHgB7Z3hcRMxEEY/M/yPqYBLBZgKYiogHSRUEDqwqSCkAtIBTgU5KrCpwEcFCRUILafMBAOns1arWcv7ZjSZydmXuZf16iTtyYBhGMZ/mUA5zrmp/3HiWxPa41ObTCbfYeyPl3rm27VvaxdnHV77BsYwQey9S4dkX8D4Ey+lYYrd5atvr2H8lvvetweXny2dG8eMF7Bw8ixwjBSSe5ySXZ8WSnMc6cL1Hdp2pBTKzQvf5vS+Z+eYht9d73mu+js+1/fwY2Rc7XHOKzeuo7xHzfgLvBghYZsSaW78J+MMteLiI7OtY3yMR0quM4r9hc0iF54lRwbJsXRRLIpfoByxIezST978ABN/jo7OFXnZOWojkh62yEwkitcoRMkIng0cWyE/nweOUbqaogBFBFP+jbzkDvlpI8cbFKBUBJ9Ejm+Qn1g+ryeCPadDB33H9IjMhM5uiCKjupI5+CgxwcKYYGFMsDAmWBgTLIwJFuYlMhJmqWgiZfcmvom87wvKc+n/7nznd51vrb+H/oZMZCmdcv1yDkmaow463+ZZZvfAxPUlSy0KDT0LQqPLObf+jSU4RC6tEDSoE5I840Qyt5OjeoMG9UKfyiUYJEdwmE99QP1QFJ+mTkhxIvhYykUpkBokwhFcW6c2RHIwcQS/ghHFRnLCmGBhTLAwJlgYEyyMCRbGBAtjgoUxwcJkXdEQZhPa09xArN5NBYcgeOnbze5sVpiLpunSSyhGc4ogoe+82E//miqk2jPfPqCP5Oy1bbnQLJiWa9rYi8KSjtqKda2Cb/dZCwurwEsoRKvgJfbnBgrRKHiTssgY8rREITcLjYI7pNNBGRoFq70jSEGjYM4AooEyVApOecQqDDzUje603kWMftKe+R5x1N6m7fM8caiP+wiFaB7JrdyIvdDCP6KFUjQLpjy8cf2OJ3890+b6XU9osqeF4iKYQ5lNo5RBg4gOoeIRNl2ZnYOR+hxb0RDGBAtjgoUxwcKYYGFMsDAmWBgTLIwJFsYEjyN5lYUjWN0CoyA/kQhHcIfK1s8GSA6mZMFhmXyF+rnlbDuW42Fw2gey1ocSOzC3NWB1cmHztznqTBV0TefcPSPYdxGhhuwtFBZ9MGjRb2PA/q6krF8WFbZooTWyBocJRe3dmKpOwzAMwzAM46D5BQKPEAynaIyeAAAAAElFTkSuQmCC",F=A.memo(({task:s,allTasks:t})=>{const{tg:c}=I(),[_,a]=A.useState(),[l,r]=A.useState(!1),d=K({query:"(max-height: 690px)"}),k=Z(),m=()=>{const y=t[0].completed;!y&&s.task.dop_name==="anketa"?(r(!0),c.HapticFeedback.impactOccurred("medium")):r(!1),s.task.id!==1&&y&&(r(!0),c.HapticFeedback.impactOccurred("medium")),s.task.id===2&&(r(!1),k("/friends"))},o=()=>{r(!1),c.HapticFeedback.impactOccurred("medium")};return A.useEffect(()=>{be(s.task.dop_name,a)},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("li",{onClick:m,className:u.task_item,children:[s.task.id>2&&!t[0].completed&&e.jsx("img",{src:Ge,className:u.iconLock}),e.jsx("p",{className:u.task_name,children:s.task.name}),s.completed?e.jsx("button",{disabled:!0,className:u.task_compl_btn,children:s.completed&&"Награда получена"}):s.task.id>2&&!t[0].completed?e.jsxs("button",{disabled:!0,className:u.task_compl_btn,children:["Заполните профиль"," "]}):e.jsxs("div",{className:u.coins_box,children:[e.jsx("img",{className:u.coin_img,src:Q,alt:""}),e.jsx("span",{className:u.coins,children:s.task.reward_currency})]}),e.jsx("img",{className:u.icon,src:_})]}),e.jsx(Oe,{isOpen:l,onClose:o,initialHeight:d?"100%":"90%",fullHeight:"100vh",task:s})]})});function Xe(){const{tg_id:s}=I(),[t,c]=A.useState([]),[_,a]=A.useState([]),[l,r]=A.useState([]),[d,k]=A.useState([]),{data:m}=z({queryFn:()=>L(s),queryKey:["tasks"]},g);return A.useEffect(()=>{m&&(c(m),a(m.filter(o=>o.task.heading==="Задания")),r(m.filter(o=>o.task.heading==="Подпишись на соцсети")),k(m.filter(o=>o.task.heading==="Временные задания")))},[m]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:x.task__section,children:[e.jsx("h1",{className:x.task_title,children:"Задания"}),e.jsxs("ul",{className:x.tasks_list,children:[_.map(o=>e.jsx(F,{allTasks:t,task:o},o.task.id)),e.jsx("h2",{className:x.task_heading,children:"Подпишись на соцсети"}),l.map(o=>e.jsx(F,{allTasks:t,task:o},o.task.id)),e.jsx("h2",{className:x.task_heading,children:"Временные задания"}),d.map(o=>e.jsx(F,{allTasks:t,task:o},o.task.id))]})]})})}export{Xe as default};
