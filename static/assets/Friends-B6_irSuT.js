import{j as e,u as h,r as n}from"./index-BZiaIAsH.js";import{P as v}from"./PageUI-C997UuXk.js";import{u as c}from"./useQuery-WcefZhTk.js";import{a as x,f as j}from"./fetchFriends-Bv_PMtk4.js";import{q as l}from"./queryClient-4Wi4fGUK.js";const k="_friends__section_9k5ar_1",b="_friends__title_9k5ar_6",g="_friends__invite_9k5ar_10",N="_invite__title_9k5ar_23",y="_invite__label_9k5ar_31",F="_invite__button_9k5ar_39",q="_page__list_9k5ar_50",i={friends__section:k,friends__title:b,friends__invite:g,invite__title:N,invite__label:y,invite__button:F,page__list:q},L="_friends__item_1rh97_1",E="_friends__position_1rh97_17",R="_friends__avatar_1rh97_31",A="_friends__info_1rh97_39",C="_friends__name_1rh97_51",I="_friends__coins_1rh97_63",K="_friends__button_1rh97_75",s={friends__item:L,friends__position:E,friends__avatar:R,friends__info:A,friends__name:C,friends__coins:I,friends__button:K};function P({friends:_}){return e.jsxs("li",{className:s.friends__item,children:[e.jsx("span",{className:s.friends__position,children:"1"}),e.jsx("img",{className:s.friends__avatar,src:"avatar",alt:"avatar"}),e.jsxs("div",{className:s.friends__info,children:[e.jsx("p",{className:s.friends__name,children:_==null?void 0:_.name}),e.jsx("p",{className:s.friends__coins,children:_==null?void 0:_.points})]}),e.jsx("button",{className:s.friends__button,children:"Забрать награду"})]})}function Q(){const{tg:_,tg_id:o}=h(),[d,f]=n.useState([]),[m,u]=n.useState(""),p=()=>{const a=`https://t.me/share/url?url=${m}`;_.openTelegramLink(a),_.HapticFeedback.impactOccurred("light")},t=c({queryKey:["refLink"],queryFn:()=>x(o)},l),{data:r}=c({queryKey:["friends"],queryFn:()=>j(o)},l);return n.useEffect(()=>{t.data&&u(t.data.ref_link)},[t]),n.useEffect(()=>{r&&f(r)},[r]),e.jsxs(v,{className:i.friends__section,className__title:i.friends__title,title:"Друзья",children:[e.jsxs("div",{className:i.friends__invite,children:[e.jsx("h2",{className:i.invite__title,children:"Играть вместе веселее!"}),e.jsx("p",{className:i.invite__label,children:"Получай награды за каждого друга, который присоединился"}),e.jsx("button",{className:i.invite__button,onClick:p,children:"Пригласить друга"})]}),e.jsx("ul",{className:i.page__list,children:d.map(a=>e.jsx(P,{friends:a}))})]})}export{Q as default};
