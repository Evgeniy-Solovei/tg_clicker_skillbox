import{u as z,r as _,j as s}from"./index-D6lMSkWz.js";import{u as E}from"./useQuery-C20qwmZk.js";import{a as x,b,q as d}from"./queryClient-CRCyLP2_.js";import{i as F}from"./coin-DlK3Y3AM.js";import{S as U}from"./SlidingPanel-vRByHqie.js";import{u as C}from"./useMutation-vOtLI83j.js";import{c as K}from"./fetchFriends-C4J2cka3.js";const M="_task__section_10wp2_1",T="_tasks_list_10wp2_6",G="_task_title_10wp2_10",V="_task__item_10wp2_19",D="_coins_box_10wp2_32",J="_task_name_10wp2_38",O="_coins_10wp2_32",P="_icon_10wp2_54",q="_task_heading_10wp2_62",p={task__section:M,tasks_list:T,task_title:G,task__item:V,coins_box:D,task_name:J,coins:O,icon:P,task_heading:q};function W(e){return x.get(`${b}/api/tasks/${e}/`).then(t=>t.data).catch(t=>{console.log(t)})}const X=(e,t)=>x.post(`${b}/api/tasks/start/${e}/${t}/`).then(c=>c.data).catch(c=>c),L=(e,t)=>x.post(`${b}/api/tasks/${e}/${t}/`).then(c=>c.data).catch(c=>c),$=(e,t,c,r)=>x.post(`${b}/api/task_info/`,{tg_id:e,country:t,name_player:c,phone:r}).then(a=>a.data).catch(a=>a),ss="_task_title_1o5r7_1",es="_task_item_1o5r7_10",ts="_task_name_1o5r7_26",ns="_coins_box_1o5r7_33",as="_task_btn_1o5r7_41",is="_task_compl_btn_1o5r7_58",cs="_coins_1o5r7_33",os="_icon_1o5r7_82",_s="_coin_img_1o5r7_90",m={task_title:ss,task_item:es,task_name:ts,coins_box:ns,task_btn:as,task_compl_btn:is,coins:cs,icon:os,coin_img:_s},ls="/assets/iconInst-KKVCkHXf.png",rs="/assets/refFriend-ClCxNyvZ.png",As="/assets/iconTel-B2YMwMca.png",us="/assets/iconS-B6ipBvZu.png",ms="/assets/iconHeartY-D2heBaz7.png",ds="/assets/iconWebinar-CLWn8zyl.png",gs="/assets/iconYoutube-iurrvn-W.png",hs="/assets/imgFirstTask-BQIMGM7V.png",ks=(e,t)=>{switch(e){case"Подписка на инстаграм":return t(ls);case"Пригласи друга по реферальной ссылке":return t(rs);case"Подписка на телеграм":return t(As);case"Подпишись на бота Skillbox":return t(us);case"Посмотри видео на YouTube":return t(ms);case"Посмотри вебинар":return t(ds);case"Подписка на YouTube":return t(gs);case"Заполни анкету":return t(hs)}},ps="_sliding__block_1jdzh_2",xs="_name_title_1jdzh_15",bs="_coin_box_1jdzh_24",js="_img_coin_1jdzh_31",fs="_coins_1jdzh_36",ys="_btn_1jdzh_44",Cs="_text_info_1jdzh_60",Is="_btn_check_1jdzh_69",Ns="_form_box_1jdzh_84",Rs="_input_name_1jdzh_95",Ss="_select_region_1jdzh_115",Bs="_btn_submit_1jdzh_134",zs="_input_box_1jdzh_148",Es="_icon_input_1jdzh_155",Fs="_iconCheckbox_1jdzh_163",ws="_agreement_box_1jdzh_169",Qs="_agreement_text_1jdzh_173",vs="_link_agr_1jdzh_180",n={sliding__block:ps,name_title:xs,coin_box:bs,img_coin:js,coins:fs,btn:ys,text_info:Cs,btn_check:Is,form_box:Ns,input_name:Rs,select_region:Ss,btn_submit:Bs,input_box:zs,icon_input:Es,iconCheckbox:Fs,agreement_box:ws,agreement_text:Qs,link_agr:vs},Hs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJISURBVHgB7ZjfahNBFMa/M9tNK1gbEDRS/2xBavHGvIHbJ7Bv0HjplfQNeukreNX4Br5B0zeIdyKCIygNgjjBf8HtznEGE+lF22xmT2gL84NlWXbYnW/mnDnfDBCJRCKRSCRy4SDMidbt+49JJW0GN//9iExZcu/L53dvMAfEhbRaGxnSco+I8pPeM6CpKPLDww8fIYiCNA27f5oIjxu5jNO012xmTQgiKqR1d33bd3RaO99m8Vq6DUFEhRBjq3rj02ctBNnQoumz8f/HjDYEEc4REo37WZBP9nPiPIUYCCIsxL6u2tIVyj4EERXCiisLgU1eQRBRIQP9/sCtXFPFuNnoDj697UEQ8RxZpD9P3e2MsOH+SBU7ECaBMMaY0Y/h15dXV65jXOXHphHG+awXTsQzo7Voos8F76G88508t7KNzF+T5xur64+kfZZHxP36jjPRFvlr7LWsDy+2u2yVThqF4TLNwdyZGErrQsxZmj4dHe1KOOFaQvzIXllu7LmvVPdYJ8DM3dH3YseY8JBbQA2cg913t9qeyc1SZ2k5zVyJ3EQgwauWt+wKJGb8fMjdvPPgCQIJFjKTZa+K4g4CCRdCyCFMHWsfLITH9UGYDIEECTleF6S5tbZ2DwHE/chFI0jIEka+cGnIo39/4yECCBKineljpTZdwnchBVEPSZGHVvfaXssnPtvyeeIKGs+4fLolvG/Z7V+UOhjoevsT8SPT1exhu4RtokRGxCvHz36ZaUiJNQoL+id+6Uth5yORSCQSiUTC+QvVX7KMdrq20AAAAABJRU5ErkJggg==",Ys="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQwSURBVHgB7ZgxcxtFFMff20MhGTvWyRB8gtg5zdjGnU2XLkpFOouODuUTQDq6iA4qzDdwPgGidGX5E0R0WDajk8A5w0ySsxFjW5H28VZ2iKKcdafdy0yK+8145mZ1u77/7tu3/7cAKSkpKSkpKSnvHAgJ49xcvEOIJR65KABdbrL5LyCiOgHURa+34fvNFiRMYkKUAECsIGIx6l0WtYm9XiVJQYkIcRYWHyKICkwEBZKo/Ncf+79AAlhgSH5+6UdE8S1MDF7l1ftyOmt7naPnv4IhRiuitxKjUNDvY/Hvg4aRGAGaOM6KGy0CPd43NZ6tYMw7thC0AYZoC4GMfHjpbwhVsF64fnu34Ld27z5pN3IkxF3+xQt9nRPEIFkYoC+E02tYM0mo+K3GF37z9Yx06P1We190P+PHeuh4AstggNYecdzFOyhFLeQnz283Cnp9KfDbeznQRGtFRN+yw9r5wNuECA69/R0IXRW0bdu1QRMtIRLwspnzIAZ0SXhdy2EWNNHfIwYgQejMnzynI9BES4gl+6EzSgQliAEhrIW0BkHgBaCJlpCDg7162NkgEEr5fOHWuL75haWvua872i75vAEDtEOLgDZD2zOZ2mVi5uYX1zmwQg8/DrcqGKBtUcakYFBhQurD2OVKEgEKyS4AvxnjjCPTdhRGXit/a/lniLkvxsFZrHzYbjwCA4yyFqF4MN5HxYD3hqkIhZEQth0eqymDPh6IbhkSwLge+ef46e509gMVo0WYEGFB8Unz911IAC0hH32yvHo9m1vpHD8bGMPO0dOd69lZPuTwdtwx1L5gc7mlnpU1yd748POZqexppxNoHYoThZazsPyVM7+0bVlQRyFqzs3l/608G74H/HGVOOOMbu5rM1e2BYoqZDKeGl/H0scSooqouYWlxxw+m8MplJBesxr8cd+NE6MSgyRZGt3cw6lTja8maY5LaJiAWKE1PTv7mK92VoY/iD/4+zPrxQ+nQXA6/O5FmHEmw3sjw3i8J+75rb2d0fGncje2+Myx8fzqyL4QdHtqZtb+9/jZFsQg8hz5eP7TdZ75l6eux5XefVUkRfVzXC6FpdwGZUe4YjzB7v3Ai/ZSHL58D/BqVU+Ou7k4HiwytIYtO99HeXh21oQYqNSsTmsWXlAVYxwRCqsPVRoqB+Ja+8gVcV3X7sorTbpY8sE/Iaop+3H45/4OJIDKWlen31sNueCLbV1iWRSVrTC8+htcharTmUjW2fgFmOl7qq4IC4d84dxMyp61xndhNvdd43H5GZWtH61RPL7AKI7W/kZCBmI45kFKFb9leIsMMhvAxqno/hQ3HC/6Tcb5JqZ17lni8CpCAgyyIGKd47Z6Is4eTSJgaAwzWFiRha1yfWK/DBHkZyJ8o5xFZHvPl3ZIpGad95po8QFQG3i2lJSUlJSUFHP+A/r1rP82Q9R+AAAAAElFTkSuQmCC",Zs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKRSURBVHgB7ZhNTttAFIDfG8sCmj+XtFVQ/4yKELvmBuQIuQFh2R03KL0BnKDpsrv0BDXL7siuCpUwoCqpVCIHuatQT+dFiuTSOvaMjY3QfCtH7zmabzzz/MYAGo1Go9FoNHcOBEUsy7ZWqks7HLiF02l3ODw9gwJREiGJpar5mQE26TcHcIVMq0gZaZGbEnOKlpESiZKYU6QMk0leqZhvoyQIMSs2N01nbW39JeSMlAhHbMflzGXo6UGOSInQIJPmmZaZKDcrZEW8hKnu1Ju6kCNSIgHy47gckmUGtD3PTSqdCVIiYpM4i8IkgQa0vp8O+pAzciIscBaFi5IgpERG7rcjjtyJiv+eBrlWqjByT4Tg2I2MIe5DQRggiT+57Fdq9Y64/Gf2EdEu1Va9X5PxF8gZ+Sci4CzoRP8hHjx5uvkackZJJG6viPLby7tNURKZgcZu1AuyiJ5L+WBFNOyNbQyYExWP64Ybzza2ObI9BO7h9fV+mq5ZerOH8b3xWblWp9lo/S+OVBAM1inXHo2oSIRjjRevdhCNHiJsiSLR5IbRrjyo9nzfm4ACqUQIMcCjcrVuiwFFtPe4LITa5eqqXSnVjmmgMwkwun9lCek0MqmWVpjG8833QqYTlxdw6DGEyOOA6uEsMxEiqUwcKjKpl1YY/+ry06I9k5TZMmOs6V+NPyS9R738RjA6H7wTc7oHKREFoCWTn7kIMTw/ORQzui4uXVAk4PxAJj/TpRXG9356oqId0lITs0UVbTnpvZxD98fFyRuQ4NZE5lB5Lj18/FGMzkKAZlw+SYwuBrsgSaZVK46GvWVDEIh3yKyy2TfjqhJEriJhSAohaIoPAbN+jDPsj9yvDmg0Go1Go9HcH/4AuzvzMfyBSJsAAAAASUVORK5CYII=",Us="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE0SURBVHgB3ZU9UsJAGIbfb7WksIQujZ7BP5QbeIUlN/AEUmkbD6CMrfbaogmDpd7AktIDAB/7EZgJkIVZstvwzGSy2d153sn+EuY0z/iaCS14gBi9dECfs/JMfsFd89LwS5L26ZYuz/mOCB0EgBkdZeQagTDDo5V5RwgFIVLwRK1WXu8lQMfAk1km9fp62yEqIvI4zsvHJ8BwuNxe6Q+K8od7IP1a77NzwKr84728nzXANmkucmuATJZMmo6rya0BzSug0chFxRBXuVC6it5e8yFqF4SCq1wgc9CxrVEC2ivD5CIXNq6i7nP+7CoXtm60RYBsIFe5sHGIfODtsNvjAHPr/CEQZnJ/1GSCBIHgMRKVDehRLmd4Rpz9b3qhRUXrlKMR4cbco0eoAuMfB/jNMurJ5xT1OGI/lUVFwQAAAABJRU5ErkJggg==",I={by:"https://skillbox.by/consent_access.pdf",kz:"https://skillbox.kz/privacy_policy.pdf",uz:"https://skillbox.uz/privacy_policy.pdf"};function Ks(e){return e===2?"Пригласить":e===11||e===12?"Смотреть":"Подписаться"}function Ms({fullHeight:e,initialHeight:t,isOpen:c,onClose:r,task:a}){const{tg:A,tg_id:u}=z(),[h,g]=_.useState(""),l=E({queryKey:["refLink"],queryFn:()=>K(u)},d);_.useEffect(()=>{l.data&&g(l.data.ref_link)},[l]);const o=C({mutationFn:i=>X(i.tg_id,i.don_name),onSuccess:()=>{a.task.link&&(window.location.href=a.task.link)}},d),w=C({mutationFn:i=>L(i.tg_id,i.dop_name),onSuccess:()=>{d.invalidateQueries({queryKey:["tasks"]})}},d),Q=()=>{if(a.task.link&&o.mutate({tg_id:u,don_name:a.task.dop_name}),+a.task.id==2){const i=`https://t.me/share/url?url=${h}`;A.openTelegramLink(i)}},v=()=>{w.mutate({tg_id:u,dop_name:a.task.dop_name}),a.completed===!1?a.task.link&&(window.location.href=a.task.link):r()},[j,R]=_.useState(""),[k,S]=_.useState("by"),[f,B]=_.useState(""),[H,y]=_.useState(""),Y=C({mutationFn:i=>$(i.tg_id,i.country,i.name_player,i.phone),onSuccess:()=>{d.invalidateQueries({queryKey:["tasks"]}),R(""),S("by"),B(""),r()}},d);_.useEffect(()=>{switch(k){case"by":y(I.by);break;case"kz":y(I.kz);break;case"uz":y(I.uz);break}},[k]);const Z=i=>{i.preventDefault(),j&&f&&k&&Y.mutate({tg_id:u,name_player:j,country:k,phone:f})};return s.jsx(U,{initialHeight:t,fullHeight:e,darkened:!0,isOpen:c,onClose:r,children:s.jsx("div",{className:n.sliding__block,children:a.task.name==="Заполни анкету"?s.jsxs("form",{className:n.form_box,onSubmit:Z,children:[s.jsxs("div",{className:n.input_box,children:[s.jsx("img",{className:n.icon_input,src:Hs}),s.jsx("input",{className:n.input_name,type:"text",value:j,onChange:i=>R(i.target.value),placeholder:"Имя"})]}),s.jsxs("div",{className:n.input_box,children:[s.jsx("img",{className:n.icon_input,src:Ys}),s.jsxs("select",{className:n.select_region,value:k,onChange:i=>S(i.target.value),children:[s.jsx("option",{disabled:!0,defaultValue:"Регион",children:"Регион"}),s.jsx("option",{value:"by",children:"Беларусь"}),s.jsx("option",{value:"kz",children:"Казахстан"}),s.jsx("option",{value:"uz",children:"Узбекистан"})]})]}),s.jsxs("div",{className:n.input_box,children:[s.jsx("img",{className:n.icon_input,src:Zs}),s.jsx("input",{className:n.input_name,type:"tel",value:f,onChange:i=>B(i.target.value),placeholder:"Номер телефона"})]}),s.jsx("button",{className:n.btn_submit,type:"submit",children:"Отправить"}),s.jsxs("div",{className:n.agreement_box,children:[s.jsx("img",{src:Us,className:n.iconCheckbox}),s.jsxs("span",{className:n.agreement_text,children:["Соглашаюсь с"," ",s.jsx("a",{className:n.link_agr,href:H,children:"условиями передачи данных"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:n.name_title,children:a.task.name}),s.jsxs("div",{className:n.coin_box,children:[s.jsx("img",{className:n.img_coin,src:F,alt:""}),s.jsx("span",{className:n.coins,children:a.task.reward_currency})]}),s.jsx("button",{onClick:Q,className:n.btn,children:Ks(+a.task.id)}),s.jsx("p",{className:n.text_info,children:"Оставшееся время для модерации, чтобы получить награду: 1 час"}),s.jsx("button",{onClick:v,className:n.btn_check,children:"Проверить"})," "]})})})}function N({task:e,allTasks:t}){const[c,r]=_.useState(),[a,A]=_.useState(!1),u=()=>{const g=t[0].completed;!g&&e.task.id===1?A(!0):A(!1),e.task.id!==1&&g&&A(!0),e.task.id===2&&A(!1)},h=()=>{A(!1)};return _.useEffect(()=>{ks(e.task.name,r)},[e]),s.jsxs(s.Fragment,{children:[s.jsxs("li",{onClick:u,className:m.task_item,children:[s.jsx("p",{className:m.task_name,children:e.task.name}),e.completed?s.jsx("button",{disabled:!0,className:m.task_compl_btn,children:e.completed&&"Награда получена"}):s.jsxs("div",{className:m.coins_box,children:[s.jsx("img",{className:m.coin_img,src:F,alt:""}),s.jsx("span",{className:m.coins,children:e.task.reward_currency})]}),s.jsx("img",{className:m.icon,src:c})]}),s.jsx(Ms,{isOpen:a,onClose:h,initialHeight:"70%",fullHeight:"70vh",task:e})]})}function qs(){const{tg_id:e}=z(),[t,c]=_.useState([]),[r,a]=_.useState([]),[A,u]=_.useState([]),[h,g]=_.useState([]),{data:l}=E({queryFn:()=>W(e),queryKey:["tasks"]},d);return _.useEffect(()=>{l&&(c(l),a(l.filter(o=>o.task.heading==="Задания")),u(l.filter(o=>o.task.heading==="Подпишись на соцсети")),g(l.filter(o=>o.task.heading==="Временные задания")))},[l]),s.jsx(s.Fragment,{children:s.jsxs("section",{className:p.task__section,children:[s.jsx("h1",{className:p.task_title,children:"Задания"}),s.jsxs("ul",{className:p.tasks_list,children:[r.map(o=>s.jsx(N,{allTasks:t,task:o},o.task.id)),s.jsx("h2",{className:p.task_heading,children:"Подпишись на соцсети"}),A.map(o=>s.jsx(N,{allTasks:t,task:o},o.task.id)),s.jsx("h2",{className:p.task_heading,children:"Временные задания"}),h.map(o=>s.jsx(N,{allTasks:t,task:o},o.task.id))]})]})})}export{qs as default};
