import{u as x,j as s,r as l}from"./index-DPme1Txe.js";import{u as g}from"./useQuery-BPCKFzAD.js";import{a as u,b as d,q as r}from"./queryClient-B9b7v_hh.js";import{i as b}from"./coin-DlK3Y3AM.js";import{S as h}from"./SlidingPanel-CbUxzAJu.js";import{u as y}from"./useMutation-CcaU91ax.js";import"./Portal-C6DSouZR.js";const j="_task__section_jyd9f_1",N="_tasks_list_jyd9f_6",T="_task_title_jyd9f_10",$="_task__item_jyd9f_19",S="_coins_box_jyd9f_32",C="_task_name_jyd9f_38",v="_coins_jyd9f_32",q="_icon_jyd9f_52",k={task__section:j,tasks_list:N,task_title:T,task__item:$,coins_box:S,task_name:C,coins:v,icon:q};function F(n){return u.get(`${d}/api/tasks/${n}/`).then(t=>t.data).catch(t=>{console.log(t)})}function Y(n){return u.get(`${d}/api/tasks_tg/${n}/`).then(t=>t.data).catch(t=>{console.log(t)})}const E=(n,t)=>u.post(`${d}/api/tasks/start/${n}/${t}}/`).then(e=>e.data).catch(e=>e),H="_task_title_99sal_1",K="_task_item_99sal_10",w="_task_name_99sal_26",B="_coins_box_99sal_33",O="_task_btn_99sal_41",W="_task_compl_btn_99sal_58",M="_coins_99sal_33",z="_icon_99sal_82",A="_coin_img_99sal_90",_={task_title:H,task_item:K,task_name:w,coins_box:B,task_btn:O,task_compl_btn:W,coins:M,icon:z,coin_img:A},L="/assets/iconInst-KKVCkHXf.png",Q="/assets/refFriend-ClCxNyvZ.png",Z="/assets/iconTel-B2YMwMca.png",D="/assets/iconS-B6ipBvZu.png",P="/assets/iconHeartY-D2heBaz7.png",R="/assets/iconWebinar-CLWn8zyl.png",V="/assets/iconYoutube-iurrvn-W.png",X=(n,t)=>{switch(n){case"Подписка на инстаграм":return t(L);case"Пригласи друга по реферальной ссылке":return t(Q);case"Подписка на телеграм":return t(Z);case"Подпишись на бота Skillbox":return t(D);case"Посмотри видео на YouTube":return t(P);case"Посмотри вебинар":return t(R);case"Подписка на YouTube":return t(V)}},G="_sliding__block_51ypp_1",J="_name_title_51ypp_14",U="_coin_box_51ypp_23",I="_img_coin_51ypp_30",ss="_coins_51ypp_35",ts="_btn_51ypp_43",ns="_text_info_51ypp_59",as="_btn_check_51ypp_68",i={sliding__block:G,name_title:J,coin_box:U,img_coin:I,coins:ss,btn:ts,text_info:ns,btn_check:as};function es({fullHeight:n,initialHeight:t,isOpen:e,onClose:c,task:a}){const{tg_id:o}=x(),m=y({mutationFn:p=>E(p.tg_id,p.don_name),onSuccess:()=>{r.invalidateQueries({queryKey:["tasks"]}),c()}},r),f=()=>{a.task.link&&(console.log(a.task.dop_name),m.mutate({tg_id:o,don_name:a.task.dop_name}))};return s.jsx(h,{initialHeight:t,fullHeight:n,darkened:!0,isOpen:e,onClose:c,children:s.jsxs("div",{className:i.sliding__block,children:[s.jsx("p",{className:i.name_title,children:a.task.name}),s.jsxs("div",{className:i.coin_box,children:[s.jsx("img",{className:i.img_coin,src:b,alt:""}),s.jsx("span",{className:i.coins,children:a.task.reward_currency})]}),s.jsx("button",{onClick:f,className:i.btn,children:"Подписаться"}),s.jsx("p",{className:i.text_info,children:"Оставшееся время для модерации, чтобы получить награду: 1 час"}),s.jsx("button",{className:i.btn_check,children:"Проверить"})]})})}function cs({task:n}){const[t,e]=l.useState(),[c,a]=l.useState(!1),o=()=>{a(!0)},m=()=>{a(!1)};return l.useEffect(()=>{X(n.task.name,e)},[n]),s.jsxs(s.Fragment,{children:[s.jsxs("li",{onClick:o,className:_.task_item,children:[s.jsx("p",{className:_.task_name,children:n.task.name}),s.jsxs("div",{className:_.coins_box,children:[s.jsx("img",{className:_.coin_img,src:b,alt:""}),s.jsx("span",{className:_.coins,children:n.task.reward_currency})]}),s.jsx("img",{className:_.icon,src:t})]}),s.jsx(es,{isOpen:c,onClose:m,initialHeight:"70%",fullHeight:"70vh",task:n})]})}function us(){const{tg_id:n}=x(),[t,e]=l.useState([]),{data:c}=g({queryFn:()=>Y(n),queryKey:["taskTg"]},r),{data:a}=g({queryFn:()=>F(n),queryKey:["tasks"]},r);return l.useEffect(()=>{c&&console.log(c)},[c]),l.useEffect(()=>{a&&e(a)},[a]),s.jsx(s.Fragment,{children:s.jsxs("section",{className:k.task__section,children:[s.jsx("h1",{className:k.task_title,children:"Задания"}),s.jsx("ul",{className:k.tasks_list,children:t.map(o=>s.jsx(cs,{task:o},o.task.id))})]})})}export{us as default};
