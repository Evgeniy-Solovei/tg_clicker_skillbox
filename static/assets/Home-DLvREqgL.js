import{u as h,r as n,a as f,s as g,j as e,f as v,e as r,L as j}from"./index-BasPxLKV.js";import{f as b}from"./friends__invite-Ds21nNo3.js";import{p as N,t as H,H as T,a as y,b as S,c as C,S as F,d as O}from"./ticket-DBcL57Mv.js";import{g as p}from"./getUser-DJBpJkua.js";import{g as $}from"./getCurrTicket-unHkMUTY.js";import{u as w}from"./index-BSr89RLi.js";import{c as B}from"./SlidingPanel-BSNJItSX.js";const E="_home__section_ud60n_1",I="_imgBoxy_ud60n_6",L="_img__mobile_ud60n_15",l={home__section:E,imgBoxy:I,img__mobile:L},M="_home__grid_9o10g_1",Q="_home__title_9o10g_38",R="_home__label_9o10g_46",q="_home__link_9o10g_58",A="_reverse_9o10g_82",D="_tickets__switcher_9o10g_91",G="_home__ticket_9o10g_113",P="_home__info_9o10g_122",U="_label__tickets_9o10g_130",z="_active_9o10g_143",J="_active_blue_9o10g_154",K="_imgTicket_9o10g_165",V="_home__task_nav_9o10g_170",s={home__grid:M,home__title:Q,home__label:R,home__link:q,reverse:A,tickets__switcher:D,home__ticket:G,home__info:P,label__tickets:U,active:z,active_blue:J,imgTicket:K,home__task_nav:V};function k(t){return t===1?"билет":t>=2&&t<5?"билета":"билетов"}const W=({user:t})=>{const{tg:_}=h(),[i,m]=n.useState("regular"),a=f();return n.useEffect(()=>{a(g(!0))},[]),e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:`${i==="premium"?`${s.label__tickets} ${s.active_blue}`:s.label__tickets}`,htmlFor:"premium-tickets",children:[e.jsx("span",{className:s.home__ticket,children:t==null?void 0:t.premium_tickets}),e.jsx("span",{className:s.home__info,children:t&&k(t==null?void 0:t.premium_tickets)}),e.jsx("img",{className:s.imgTicket,src:N,alt:""}),e.jsx("input",{checked:i==="premium",onChange:()=>{m("premium")},onClick:()=>{a(v(!1)),_.HapticFeedback.impactOccurred("medium")},name:"tickets",type:"radio"})]}),e.jsxs("label",{className:`${i==="regular"?`${s.label__tickets} ${s.active}`:s.label__tickets}`,htmlFor:"tickets",children:[e.jsx("span",{className:s.home__ticket,children:t==null?void 0:t.tickets}),e.jsx("span",{className:s.home__info,children:t&&k(t==null?void 0:t.tickets)}),e.jsx("img",{className:s.imgTicket,src:H,alt:""}),e.jsx("input",{checked:i==="regular",onChange:()=>{m("regular")},onClick:()=>{a(g(!0)),_.HapticFeedback.impactOccurred("medium")},id:"tickets",name:"tickets",type:"radio"})]})]})},X=[{id:1,title:"Лидерборд",path:"leaderboard",svg:e.jsx(T,{})},{id:2,title:"Каталог",path:"catalog",svg:e.jsx(y,{}),reverse:!0},{id:3,title:"Задания",path:"tasks",svg:e.jsx(S,{className:s.home__task_nav}),reverse:!0},{id:4,title:"Друзей",path:"friends",svg:e.jsx(C,{className:s.home__task_nav})}],Y=()=>{const t=r(p),{tg:_}=h();return e.jsxs("ul",{className:s.home__grid,children:[X.map(i=>e.jsx("li",{children:e.jsxs(j,{onClick:()=>{_.HapticFeedback.impactOccurred("medium")},className:s.home__link,to:i.path,children:[i.title==="Лидерборд"&&e.jsxs("p",{className:s.home__label,children:["#",t==null?void 0:t.rank]}),i.title==="Друзей"&&e.jsx("p",{className:s.home__label,children:t==null?void 0:t.friends_count}),e.jsxs("div",{className:i.reverse?s.reverse:void 0,children:[e.jsx("p",{className:s.home__title,children:i.title}),i.svg]})]})},i.id)),e.jsx("li",{className:s.tickets__switcher,children:e.jsx(W,{user:t})})]})},_e=()=>{const{tg:t}=h(),[_,i]=n.useState(!1),[m,a]=n.useState(!1),c=r(p),o=r($),u=w({query:"(max-height: 720px)"}),x=()=>{c&&((c==null?void 0:c.tickets)>0&&o===!0||c.premium_tickets>0&&o===!1?i(!0):((c==null?void 0:c.tickets)<=0&&o===!0||c.premium_tickets>=0&&o===!1)&&a(!0),t.HapticFeedback.impactOccurred("medium"))},d=()=>{i(!1),a(!1),t.HapticFeedback.impactOccurred("medium")};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:l.home__section,children:[e.jsx(Y,{}),e.jsx("img",{onClick:x,className:u?B(l.img__mobile,l.imgBoxy):l.imgBoxy,src:b,alt:"скиллбокс"})]}),e.jsx(F,{user:c,fullHeight:"75vh",initialHeight:"75%",onClose:d,isOpen:_}),e.jsx(O,{fullHeight:"40vh",initialHeight:"40%",isOpen:m,onClose:d,currentTicket:o})]})};export{_e as default};
