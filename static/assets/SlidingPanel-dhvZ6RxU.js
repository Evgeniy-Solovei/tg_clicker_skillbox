import{r as n,j as r}from"./index-cDrDiH5_.js";import{P as O,c as I}from"./Portal-Cj2NgbOH.js";const M="_slidingPanel_mtspc_1",S="_sliding_mtspc_1",Y="_dragZone_mtspc_23",T="_dragHandle_mtspc_30",Z="_overlay_mtspc_42",D="_panelContent_mtspc_50",$="_darkened_mtspc_55",z="_visible_mtspc_63",K="_expanded_mtspc_68",U="_bodyOpen_mtspc_72",t={slidingPanel:M,sliding:S,dragZone:Y,dragHandle:T,overlay:Z,panelContent:D,darkened:$,visible:z,expanded:K,bodyOpen:U};function B(b){const{initialHeight:i,fullHeight:d,children:w,isOpen:e,onClose:s,darkened:a,className:L="",lazy:k,scrollLock:H}=b,[c,l]=n.useState("0"),h=n.useRef(null),f=n.useRef(0),_=n.useRef(0),u=n.useRef(),m=n.useRef(null),[j,C]=n.useState(!1),N=o=>{f.current=o.touches[0].clientY,_.current=parseInt(c),document.addEventListener("touchmove",p),document.addEventListener("touchend",v)},p=o=>{const E=f.current-o.touches[0].clientY,x=_.current+E;E>0?m.current="up":m.current="down",x>=parseInt(d)?l(d):x<=parseInt(i)&&l(i)},v=()=>{document.removeEventListener("touchmove",p),document.removeEventListener("touchend",v),parseInt(c)<=parseInt(i)&&m.current==="down"&&(l("0"),s&&(u.current=setTimeout(()=>{s()},300)))},g=o=>{o.key==="Escape"&&e&&s&&(u.current=setTimeout(()=>{s()},300))},y=()=>{e&&s&&(u.current=setTimeout(()=>{s()},300))},P=o=>{a&&o.target===h.current&&s()};n.useEffect(()=>(e&&(document.body.classList.add(t.bodyOpen),l(i),document.addEventListener("keydown",g),window.addEventListener("popstate",y)),()=>{clearTimeout(u.current),document.body.classList.remove(t.bodyOpen),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",v),document.removeEventListener("keydown",g),window.removeEventListener("popstate",y)}),[e]);const R={[t.visible]:e,[t.darkened]:e?a:!1};return n.useEffect(()=>{e&&C(!0)},[e]),k&&!j?null:r.jsx(O,{children:r.jsx("div",{ref:h,className:I(t.slidingPanel,R,["app_modal",L]),onClick:P,style:a?{}:{height:e?c:"0",bottom:e?"0":`-${d}`,transition:"height 0.3s ease"},children:r.jsx("div",{className:t.sliding,style:a?{height:e?c:"0",bottom:e?"0":`-${d}`,transition:"height 0.3s ease"}:{},children:r.jsxs("div",{className:t.overlay,style:c==="50%"&&H?{overflowY:"hidden"}:{overflowY:"scroll"},children:[r.jsx("div",{onTouchStart:N,className:t.dragZone,children:r.jsx("div",{className:t.dragHandle})}),r.jsx("div",{className:t.panelContent,children:w})]})})})})}export{B as S};
