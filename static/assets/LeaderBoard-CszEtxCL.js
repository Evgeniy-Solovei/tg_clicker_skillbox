import{u as b,j as e,e as p,r as x}from"./index-Bo-eR_JQ.js";import{i as h,u}from"./coin-BpkcyZK3.js";import{a as j,L as f,P as k}from"./avatar-CIwZeDhn.js";import{a as N,b as y,q as v}from"./queryClient-DzN13fHD.js";import{g as C}from"./getUser-DJBpJkua.js";import{S as O}from"./SlidingPanel-FiPemMas.js";function L(a){return N.get(`${y}/api/top100/${a}/`).then(_=>_.data).catch(_=>{console.log(_)})}const $="_leader__section_jimd4_1",F="_leader__title_jimd4_6",H="_page__list_jimd4_16",c={leader__section:$,leader__title:F,page__list:H},P="/assets/sliding__prize-BXPTTzfC.webp",S="_sliding__button_e49lx_1",q="_sliding__block_e49lx_11",z="_sliding__image_e49lx_23",I="_sliding__title_e49lx_27",T="_sliding__label_e49lx_37",d={sliding__button:S,sliding__block:q,sliding__image:z,sliding__title:I,sliding__label:T},w=({initialHeight:a,fullHeight:_,isOpen:r,onClose:t})=>{const{tg:l}=b();return e.jsx(O,{darkened:!0,initialHeight:a,fullHeight:_,isOpen:r,onClose:t,children:e.jsxs("div",{className:d.sliding__block,children:[e.jsx("img",{width:196,height:196,className:d.sliding__image,src:P,alt:""}),e.jsx("h3",{className:d.sliding__title,children:"Супер-приз ждет тебя!"}),e.jsx("p",{className:d.sliding__label,children:"15 декабря игрок, который наберет наибольшее количество баллов, получит супер-приз — iPhone 16!"}),e.jsx("button",{onClick:()=>{t(),l.HapticFeedback.impactOccurred("light")},className:d.sliding__button,children:"Ура!"})]})})},E="_leaderboard__item_10r0b_1",U="_back_10r0b_9",B="_leaderboard__avatar_10r0b_13",G="_leaderboard__name_10r0b_19",K="_leaderboard__coins_10r0b_27",M="_iconCoin_10r0b_35",Q="_leaderboard__index_10r0b_40",R="_leaderboard__gift_10r0b_47",i={leaderboard__item:E,back:U,leaderboard__avatar:B,leaderboard__name:G,leaderboard__coins:K,iconCoin:M,leaderboard__index:Q,leaderboard__gift:R},X=({id:a,name:_,points:r,index:t,openModal:l})=>{const{tg:o}=b();return e.jsxs("li",{className:t<=3?`${i.back} ${i.leaderboard__item}`:i.leaderboard__item,children:[e.jsx("span",{className:i.leaderboard__index,children:t}),e.jsx("img",{className:i.leaderboard__avatar,src:j,alt:"avatar"}),t===1&&e.jsx("button",{onClick:()=>{l(),o.HapticFeedback.impactOccurred("light")},className:i.leaderboard__gift,children:e.jsx(f,{className:i.leaderboard__svg})}),e.jsx("h2",{className:i.leaderboard__name,children:_}),e.jsx("p",{className:i.leaderboard__coins,children:r}),e.jsx("img",{className:i.iconCoin,src:h,alt:""})]},a)},Z=()=>{const a=p(C),{tg:_,tg_id:r}=b(),[t,l]=x.useState(!1),o=()=>{l(!1),_.HapticFeedback.impactOccurred("light")},g=()=>{l(!0),_.HapticFeedback.impactOccurred("light")},{data:s}=u({queryFn:()=>L(r),queryKey:["leaderboard"]},v);return e.jsxs(e.Fragment,{children:[e.jsx(k,{className:c.leader__section,className__title:c.leader__title,place:s==null?void 0:s.player_rank,name:a==null?void 0:a.name,coins:a==null?void 0:a.points_all,gift:Number(s==null?void 0:s.player_rank)===1,title:"Leaderboard",time:"До конца осталось: 12 дней 8 часов",isOpen:g,children:e.jsx("ul",{className:c.page__list,children:s==null?void 0:s.top_players.map((n,m)=>e.jsx(X,{openModal:g,index:m+1,id:n.tg_id,name:n.name,points:n.points},n.tg_id))})}),e.jsx(w,{isOpen:t,onClose:o,initialHeight:"70%",fullHeight:"70vh"})]})};export{Z as default};
