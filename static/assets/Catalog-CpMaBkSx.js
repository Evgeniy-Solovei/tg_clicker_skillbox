import{r as m,j as s,d as f,u as b}from"./index-D6lMSkWz.js";import{u as y}from"./useQuery-C20qwmZk.js";import{a as C,b as w,q as v}from"./queryClient-CRCyLP2_.js";import{i as S}from"./coin-DlK3Y3AM.js";import{l as k}from"./logo-exXQDy5k.js";import{H as z}from"./HeaderCoinSvg-BUc1s2m0.js";import{g as j}from"./getUser-DJBpJkua.js";import{S as B}from"./SlidingPanel-vRByHqie.js";const q="_catalog__section_p0z47_1",H="_catalog__header_p0z47_6",M="_reverse_p0z47_15",D="_catalog__button_p0z47_33",$="_catalog__image_p0z47_42",E="_catalog__list_p0z47_48",F="_category__caption_p0z47_53",O="_catalog__title_p0z47_79",l={catalog__section:q,catalog__header:H,reverse:M,catalog__button:D,catalog__image:$,catalog__list:E,category__caption:F,catalog__title:O};function P(t){return C.get(`${w}/api/shop/product-list/${t}/`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}}).then(a=>a.data).catch(a=>{console.log(a)})}const Q="_catalog__item_xwmjs_1",R="_catalog__upper_xwmjs_19",T="_catalog__price_xwmjs_24",U="_catalog__info_xwmjs_32",G="_catalog__down_xwmjs_41",K="_catalog__img_xwmjs_47",L="_catalog__profession_xwmjs_56",W="_catalog__prof_xwmjs_56",n={catalog__item:Q,catalog__upper:R,catalog__price:T,catalog__info:U,catalog__down:G,catalog__img:K,catalog__profession:L,catalog__prof:W},X="/assets/iconBook-Dt4xzM-P.png",Z="/assets/sale5-BHXnLRWG.png",A="/assets/sale10-DNBte8BQ.png",p="/assets/useful_materials-Cfmv-Iql.png",u="/assets/miniCurs-DjvlySZB.png",J="/assets/iconMerch-BICvc0cD.png",V=(t,a)=>{switch(t){case"Пройдите профтест на ....":return a(X);case"Скидка 5% на все курсы":return a(Z);case"Скидка 10% на все курсы":return a(A);case"Python-разработчик":return a(p);case"Бизнес-аналитик":return a(p);case"Веб-дизайнер":return a(p);case"40 правил идеального текста для соцсетей":return a(p);case"Как найти клиентов фрилансеру":return a(p);case"Введение в программирование":return a(u);case"Введение в маркетинг":return a(u);case"Введение в дизайн":return a(u);case"Эксклюзивная байка":return a(J)}},Y=t=>{if(typeof t=="number")return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},x=({id:t,name:a,price:o,description:g,prof:c})=>{const[h,i]=m.useState();return m.useEffect(()=>{V(a,i)},[a]),s.jsxs("li",{className:n.catalog__item,children:[s.jsxs("div",{className:n.catalog__upper,children:[s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"8px"},className:n.catalog__price,children:[o!=="Бесплатно"?s.jsx("img",{width:43,height:43,src:S,alt:"coin"}):null,Y(o)]}),s.jsx("h2",{className:n.catalog__info,children:a}),s.jsx("p",{className:n.catalog__prof,children:c})]}),s.jsxs("div",{className:n.catalog__down,children:[s.jsx("img",{className:n.catalog__img,src:h,alt:"предмет каталога"}),s.jsx("span",{className:n.catalog__profession,children:g})]})]},t)},I="_sliding__button_1afla_1",ss="_sliding__block_1afla_9",as="_sliding__image_1afla_22",ts="_sliding__title_1afla_26",_s="_sliding__label_1afla_34",es="_sliding__span_1afla_45",is="_sliding__money_1afla_54",ls="_sliding__coins_1afla_60",r={sliding__button:I,sliding__block:ss,sliding__image:as,sliding__title:ts,sliding__label:_s,sliding__span:es,sliding__money:is,sliding__coins:ls},ns="/assets/sliding__catalog-_ahktps_.png",os=({isOpen:t,onClose:a,initialHeight:o,fullHeight:g})=>{const c=f(j);return s.jsx(B,{darkened:!0,isOpen:t,onClose:a,initialHeight:o,fullHeight:g,children:s.jsxs("div",{className:r.sliding__block,children:[s.jsxs("div",{className:r.sliding__money,children:[s.jsx("img",{width:277,height:90,src:ns,alt:""}),s.jsx("span",{className:r.sliding__coins,children:c==null?void 0:c.points_all})]}),s.jsx("h2",{className:r.sliding__title,children:"У тебя есть баллы!"}),s.jsx("p",{className:r.sliding__label,children:"Обменяй их на бонусы в нашем магазине"}),s.jsx("p",{className:r.sliding__span,children:"*Важно: когда ты тратишь баллы в магазине, твой рейтинг в лидерборде не меняется!"}),s.jsx("button",{onClick:a,className:r.sliding__button,children:"Понятно"})]})})},fs=()=>{const{tg_id:t}=b(),a=f(j),[o,g]=m.useState(!1),c=()=>{g(!1)},h=()=>{g(!0)},{data:i}=y({queryFn:()=>P(t),queryKey:["catalog"]},v),N=["Каталог","Скидки","Полезные материалы","Мини-курсы","Мерч"].filter(e=>e!=="Каталог");return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:l.catalog__section,children:[s.jsxs("div",{className:l.catalog__header,children:[s.jsx("button",{onClick:h,className:l.catalog__button,children:"Информация"}),s.jsx("img",{width:69,height:15,className:l.catalog__image,src:k,alt:""}),s.jsxs("p",{className:l.reverse,children:[s.jsx("span",{children:a==null?void 0:a.points}),s.jsx(z,{})]})]}),s.jsx("h1",{className:l.catalog__title,children:"Каталог"}),s.jsxs("ul",{className:l.catalog__list,children:[i==null?void 0:i.shops.filter(e=>e.name==="Каталог").map(e=>e.products.map(_=>s.jsx(x,{prof:_.description,id:_.id,name:_.name,price:typeof _.price=="number"?"Бесплатно":_.price,description:e.description},_.id))),N.map(e=>s.jsxs(m.Fragment,{children:[s.jsx("li",{style:{margin:"30px 0"},children:s.jsx("h2",{className:l.category__caption,children:e})}),i==null?void 0:i.shops.filter(_=>_.name===e).map(_=>_.products.map(d=>s.jsx(x,{id:d.id,name:d.name,price:d.price,prof:d.description,description:_.description},d.id)))]},e))]})]}),s.jsx(os,{fullHeight:"70vh",initialHeight:"70%",isOpen:o,onClose:c})]})};export{fs as default};
