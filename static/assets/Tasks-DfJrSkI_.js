import{u as R,r as c,j as s}from"./index-OkFLjBe0.js";import{u as N}from"./useQuery-DmcMDeDk.js";import{a as u,b as g,q as r}from"./queryClient-O1zJUa5g.js";import{i as B}from"./coin-DlK3Y3AM.js";import{S as w}from"./SlidingPanel-di_31yIM.js";import{u as h}from"./useMutation-Kf66HMNL.js";import{c as U}from"./fetchFriends-B8y0btSj.js";const K="_task__section_jyd9f_1",M="_tasks_list_jyd9f_6",T="_task_title_jyd9f_10",G="_task__item_jyd9f_19",V="_coins_box_jyd9f_32",D="_task_name_jyd9f_38",J="_coins_jyd9f_32",O="_icon_jyd9f_52",f={task__section:K,tasks_list:M,task_title:T,task__item:G,coins_box:V,task_name:D,coins:J,icon:O};function q(t){return u.get(`${g}/api/tasks/${t}/`).then(e=>e.data).catch(e=>{console.log(e)})}const P=(t,e)=>u.post(`${g}/api/tasks/start/${t}/${e}/`).then(o=>o.data).catch(o=>o),W=(t,e)=>u.post(`${g}/api/tasks/${t}/${e}/`).then(o=>o.data).catch(o=>o),X=(t,e,o,l)=>u.post(`${g}/api/task_info/`,{tg_id:t,country:e,name_player:o,phone:l}).then(i=>i.data).catch(i=>i),L="_task_title_99sal_1",$="_task_item_99sal_10",ss="_task_name_99sal_26",ts="_coins_box_99sal_33",es="_task_btn_99sal_41",ns="_task_compl_btn_99sal_58",as="_coins_99sal_33",is="_icon_99sal_82",os="_coin_img_99sal_90",_={task_title:L,task_item:$,task_name:ss,coins_box:ts,task_btn:es,task_compl_btn:ns,coins:as,icon:is,coin_img:os},cs="/assets/iconInst-KKVCkHXf.png",ls="/assets/refFriend-ClCxNyvZ.png",_s="/assets/iconTel-B2YMwMca.png",rs="/assets/iconS-B6ipBvZu.png",As="/assets/iconHeartY-D2heBaz7.png",ms="/assets/iconWebinar-CLWn8zyl.png",us="/assets/iconYoutube-iurrvn-W.png",gs="/assets/imgFirstTask-BQIMGM7V.png",ds=(t,e)=>{switch(t){case"Подписка на инстаграм":return e(cs);case"Пригласи друга по реферальной ссылке":return e(ls);case"Подписка на телеграм":return e(_s);case"Подпишись на бота Skillbox":return e(rs);case"Посмотри видео на YouTube":return e(As);case"Посмотри вебинар":return e(ms);case"Подписка на YouTube":return e(us);case"Заполни анкету":return e(gs)}},ks="_sliding__block_tmzo3_2",xs="_name_title_tmzo3_15",bs="_coin_box_tmzo3_24",ps="_img_coin_tmzo3_31",hs="_coins_tmzo3_36",fs="_btn_tmzo3_44",js="_text_info_tmzo3_60",ys="_btn_check_tmzo3_69",Cs="_form_box_tmzo3_84",Is="_input_name_tmzo3_95",Rs="_select_region_tmzo3_115",Ns="_btn_submit_tmzo3_134",Bs="_input_box_tmzo3_148",Ss="_icon_input_tmzo3_155",zs="_iconCheckbox_tmzo3_163",Es="_agreement_box_tmzo3_169",Fs="_agreement_text_tmzo3_173",Qs="_link_agr_tmzo3_180",n={sliding__block:ks,name_title:xs,coin_box:bs,img_coin:ps,coins:hs,btn:fs,text_info:js,btn_check:ys,form_box:Cs,input_name:Is,select_region:Rs,btn_submit:Ns,input_box:Bs,icon_input:Ss,iconCheckbox:zs,agreement_box:Es,agreement_text:Fs,link_agr:Qs},vs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJISURBVHgB7ZjfahNBFMa/M9tNK1gbEDRS/2xBavHGvIHbJ7Bv0HjplfQNeukreNX4Br5B0zeIdyKCIygNgjjBf8HtznEGE+lF22xmT2gL84NlWXbYnW/mnDnfDBCJRCKRSCRy4SDMidbt+49JJW0GN//9iExZcu/L53dvMAfEhbRaGxnSco+I8pPeM6CpKPLDww8fIYiCNA27f5oIjxu5jNO012xmTQgiKqR1d33bd3RaO99m8Vq6DUFEhRBjq3rj02ctBNnQoumz8f/HjDYEEc4REo37WZBP9nPiPIUYCCIsxL6u2tIVyj4EERXCiisLgU1eQRBRIQP9/sCtXFPFuNnoDj697UEQ8RxZpD9P3e2MsOH+SBU7ECaBMMaY0Y/h15dXV65jXOXHphHG+awXTsQzo7Voos8F76G88508t7KNzF+T5xur64+kfZZHxP36jjPRFvlr7LWsDy+2u2yVThqF4TLNwdyZGErrQsxZmj4dHe1KOOFaQvzIXllu7LmvVPdYJ8DM3dH3YseY8JBbQA2cg913t9qeyc1SZ2k5zVyJ3EQgwauWt+wKJGb8fMjdvPPgCQIJFjKTZa+K4g4CCRdCyCFMHWsfLITH9UGYDIEECTleF6S5tbZ2DwHE/chFI0jIEka+cGnIo39/4yECCBKineljpTZdwnchBVEPSZGHVvfaXssnPtvyeeIKGs+4fLolvG/Z7V+UOhjoevsT8SPT1exhu4RtokRGxCvHz36ZaUiJNQoL+id+6Uth5yORSCQSiUTC+QvVX7KMdrq20AAAAABJRU5ErkJggg==",Hs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQwSURBVHgB7ZgxcxtFFMff20MhGTvWyRB8gtg5zdjGnU2XLkpFOouODuUTQDq6iA4qzDdwPgGidGX5E0R0WDajk8A5w0ySsxFjW5H28VZ2iKKcdafdy0yK+8145mZ1u77/7tu3/7cAKSkpKSkpKSnvHAgJ49xcvEOIJR65KABdbrL5LyCiOgHURa+34fvNFiRMYkKUAECsIGIx6l0WtYm9XiVJQYkIcRYWHyKICkwEBZKo/Ncf+79AAlhgSH5+6UdE8S1MDF7l1ftyOmt7naPnv4IhRiuitxKjUNDvY/Hvg4aRGAGaOM6KGy0CPd43NZ6tYMw7thC0AYZoC4GMfHjpbwhVsF64fnu34Ld27z5pN3IkxF3+xQt9nRPEIFkYoC+E02tYM0mo+K3GF37z9Yx06P1We190P+PHeuh4AstggNYecdzFOyhFLeQnz283Cnp9KfDbeznQRGtFRN+yw9r5wNuECA69/R0IXRW0bdu1QRMtIRLwspnzIAZ0SXhdy2EWNNHfIwYgQejMnzynI9BES4gl+6EzSgQliAEhrIW0BkHgBaCJlpCDg7162NkgEEr5fOHWuL75haWvua872i75vAEDtEOLgDZD2zOZ2mVi5uYX1zmwQg8/DrcqGKBtUcakYFBhQurD2OVKEgEKyS4AvxnjjCPTdhRGXit/a/lniLkvxsFZrHzYbjwCA4yyFqF4MN5HxYD3hqkIhZEQth0eqymDPh6IbhkSwLge+ef46e509gMVo0WYEGFB8Unz911IAC0hH32yvHo9m1vpHD8bGMPO0dOd69lZPuTwdtwx1L5gc7mlnpU1yd748POZqexppxNoHYoThZazsPyVM7+0bVlQRyFqzs3l/608G74H/HGVOOOMbu5rM1e2BYoqZDKeGl/H0scSooqouYWlxxw+m8MplJBesxr8cd+NE6MSgyRZGt3cw6lTja8maY5LaJiAWKE1PTv7mK92VoY/iD/4+zPrxQ+nQXA6/O5FmHEmw3sjw3i8J+75rb2d0fGncje2+Myx8fzqyL4QdHtqZtb+9/jZFsQg8hz5eP7TdZ75l6eux5XefVUkRfVzXC6FpdwGZUe4YjzB7v3Ai/ZSHL58D/BqVU+Ou7k4HiwytIYtO99HeXh21oQYqNSsTmsWXlAVYxwRCqsPVRoqB+Ja+8gVcV3X7sorTbpY8sE/Iaop+3H45/4OJIDKWlen31sNueCLbV1iWRSVrTC8+htcharTmUjW2fgFmOl7qq4IC4d84dxMyp61xndhNvdd43H5GZWtH61RPL7AKI7W/kZCBmI45kFKFb9leIsMMhvAxqno/hQ3HC/6Tcb5JqZ17lni8CpCAgyyIGKd47Z6Is4eTSJgaAwzWFiRha1yfWK/DBHkZyJ8o5xFZHvPl3ZIpGad95po8QFQG3i2lJSUlJSUFHP+A/r1rP82Q9R+AAAAAElFTkSuQmCC",Ys="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKRSURBVHgB7ZhNTttAFIDfG8sCmj+XtFVQ/4yKELvmBuQIuQFh2R03KL0BnKDpsrv0BDXL7siuCpUwoCqpVCIHuatQT+dFiuTSOvaMjY3QfCtH7zmabzzz/MYAGo1Go9FoNHcOBEUsy7ZWqks7HLiF02l3ODw9gwJREiGJpar5mQE26TcHcIVMq0gZaZGbEnOKlpESiZKYU6QMk0leqZhvoyQIMSs2N01nbW39JeSMlAhHbMflzGXo6UGOSInQIJPmmZaZKDcrZEW8hKnu1Ju6kCNSIgHy47gckmUGtD3PTSqdCVIiYpM4i8IkgQa0vp8O+pAzciIscBaFi5IgpERG7rcjjtyJiv+eBrlWqjByT4Tg2I2MIe5DQRggiT+57Fdq9Y64/Gf2EdEu1Va9X5PxF8gZ+Sci4CzoRP8hHjx5uvkackZJJG6viPLby7tNURKZgcZu1AuyiJ5L+WBFNOyNbQyYExWP64Ybzza2ObI9BO7h9fV+mq5ZerOH8b3xWblWp9lo/S+OVBAM1inXHo2oSIRjjRevdhCNHiJsiSLR5IbRrjyo9nzfm4ACqUQIMcCjcrVuiwFFtPe4LITa5eqqXSnVjmmgMwkwun9lCek0MqmWVpjG8833QqYTlxdw6DGEyOOA6uEsMxEiqUwcKjKpl1YY/+ry06I9k5TZMmOs6V+NPyS9R738RjA6H7wTc7oHKREFoCWTn7kIMTw/ORQzui4uXVAk4PxAJj/TpRXG9356oqId0lITs0UVbTnpvZxD98fFyRuQ4NZE5lB5Lj18/FGMzkKAZlw+SYwuBrsgSaZVK46GvWVDEIh3yKyy2TfjqhJEriJhSAohaIoPAbN+jDPsj9yvDmg0Go1Go9HcH/4AuzvzMfyBSJsAAAAASUVORK5CYII=",Zs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE0SURBVHgB3ZU9UsJAGIbfb7WksIQujZ7BP5QbeIUlN/AEUmkbD6CMrfbaogmDpd7AktIDAB/7EZgJkIVZstvwzGSy2d153sn+EuY0z/iaCS14gBi9dECfs/JMfsFd89LwS5L26ZYuz/mOCB0EgBkdZeQagTDDo5V5RwgFIVLwRK1WXu8lQMfAk1km9fp62yEqIvI4zsvHJ8BwuNxe6Q+K8od7IP1a77NzwKr84728nzXANmkucmuATJZMmo6rya0BzSug0chFxRBXuVC6it5e8yFqF4SCq1wgc9CxrVEC2ivD5CIXNq6i7nP+7CoXtm60RYBsIFe5sHGIfODtsNvjAHPr/CEQZnJ/1GSCBIHgMRKVDehRLmd4Rpz9b3qhRUXrlKMR4cbco0eoAuMfB/jNMurJ5xT1OGI/lUVFwQAAAABJRU5ErkJggg==",j={by:"https://skillbox.by/consent_access.pdf",kz:"https://skillbox.kz/privacy_policy.pdf",uz:"https://skillbox.uz/privacy_policy.pdf"};function ws(t){return t===2?"Пригласить":t===11||t===12?"Смотреть":"Подписаться"}function Us({fullHeight:t,initialHeight:e,isOpen:o,onClose:l,task:i}){const{tg:d,tg_id:A}=R(),[S,z]=c.useState(""),k=N({queryKey:["refLink"],queryFn:()=>U(A)},r);c.useEffect(()=>{k.data&&z(k.data.ref_link)},[k]);const E=h({mutationFn:a=>P(a.tg_id,a.don_name),onSuccess:()=>{window.location.href=i.task.link}},r),F=h({mutationFn:a=>W(a.tg_id,a.dop_name),onSuccess:a=>{r.invalidateQueries({queryKey:["tasks"]}),a.completed==="false"?window.location.href=i.task.link:l()}},r),Q=()=>{if(i.task.link&&E.mutate({tg_id:A,don_name:i.task.dop_name}),+i.task.id==2){const a=`https://t.me/share/url?url=${S}`;d.openTelegramLink(a)}},v=()=>{F.mutate({tg_id:A,dop_name:i.task.dop_name})},[x,y]=c.useState(""),[m,C]=c.useState("by"),[b,I]=c.useState(""),[H,p]=c.useState(""),Y=h({mutationFn:a=>X(a.tg_id,a.country,a.name_player,a.phone),onSuccess:()=>{r.invalidateQueries({queryKey:["tasks"]}),y(""),C("by"),I(""),l()}},r);c.useEffect(()=>{switch(m){case"by":p(j.by);break;case"kz":p(j.kz);break;case"uz":p(j.uz);break}},[m]);const Z=a=>{a.preventDefault(),x&&b&&m&&Y.mutate({tg_id:A,name_player:x,country:m,phone:b})};return s.jsx(w,{initialHeight:e,fullHeight:t,darkened:!0,isOpen:o,onClose:l,children:s.jsx("div",{className:n.sliding__block,children:i.task.name==="Заполни анкету"?s.jsxs("form",{className:n.form_box,onSubmit:Z,children:[s.jsxs("div",{className:n.input_box,children:[s.jsx("img",{className:n.icon_input,src:vs}),s.jsx("input",{className:n.input_name,type:"text",value:x,onChange:a=>y(a.target.value),placeholder:"Имя"})]}),s.jsxs("div",{className:n.input_box,children:[s.jsx("img",{className:n.icon_input,src:Hs}),s.jsxs("select",{className:n.select_region,value:m,onChange:a=>C(a.target.value),children:[s.jsx("option",{disabled:!0,defaultValue:"Регион",children:"Регион"}),s.jsx("option",{value:"by",children:"Беларусь"}),s.jsx("option",{value:"kz",children:"Казахстан"}),s.jsx("option",{value:"uz",children:"Узбекистан"})]})]}),s.jsxs("div",{className:n.input_box,children:[s.jsx("img",{className:n.icon_input,src:Ys}),s.jsx("input",{className:n.input_name,type:"tel",value:b,onChange:a=>I(a.target.value),placeholder:"Номер телефона"})]}),s.jsx("button",{className:n.btn_submit,type:"submit",children:"Отправить"}),s.jsxs("div",{className:n.agreement_box,children:[s.jsx("img",{src:Zs,className:n.iconCheckbox}),s.jsxs("span",{className:n.agreement_text,children:["Соглашаюсь с"," ",s.jsx("a",{className:n.link_agr,href:H,children:"условиями передачи данных"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:n.name_title,children:i.task.name}),s.jsxs("div",{className:n.coin_box,children:[s.jsx("img",{className:n.img_coin,src:B,alt:""}),s.jsx("span",{className:n.coins,children:i.task.reward_currency})]}),s.jsx("button",{onClick:Q,className:n.btn,children:ws(+i.task.id)}),s.jsx("p",{className:n.text_info,children:"Оставшееся время для модерации, чтобы получить награду: 1 час"}),s.jsx("button",{onClick:v,className:n.btn_check,children:"Проверить"})," "]})})})}function Ks({task:t}){const[e,o]=c.useState(),[l,i]=c.useState(!1),d=()=>{t.completed||i(!0)},A=()=>{i(!1)};return c.useEffect(()=>{ds(t.task.name,o)},[t]),s.jsxs(s.Fragment,{children:[s.jsxs("li",{onClick:d,className:_.task_item,children:[s.jsx("p",{className:_.task_name,children:t.task.name}),t.completed?s.jsx("button",{disabled:!0,className:_.task_compl_btn,children:t.completed&&"Награда получена"}):s.jsxs("div",{className:_.coins_box,children:[s.jsx("img",{className:_.coin_img,src:B,alt:""}),s.jsx("span",{className:_.coins,children:t.task.reward_currency})]}),s.jsx("img",{className:_.icon,src:e})]}),s.jsx(Us,{isOpen:l,onClose:A,initialHeight:"70%",fullHeight:"70vh",task:t})]})}function qs(){const{tg_id:t}=R(),[e,o]=c.useState([]),{data:l}=N({queryFn:()=>q(t),queryKey:["tasks"]},r);return c.useEffect(()=>{l&&o(l)},[l]),s.jsx(s.Fragment,{children:s.jsxs("section",{className:f.task__section,children:[s.jsx("h1",{className:f.task_title,children:"Задания"}),s.jsx("ul",{className:f.tasks_list,children:e.map(i=>s.jsx(Ks,{task:i},i.task.id))})]})})}export{qs as default};
