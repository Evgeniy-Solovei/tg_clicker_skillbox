import{r as m,j as s,e as j,u as b,b as y}from"./index-BG6DyFqA.js";import{u as C}from"./useQuery-D34snuXy.js";import{a as v,b as k,q as S}from"./queryClient-BaKBWkNZ.js";import{i as z}from"./coin-DlK3Y3AM.js";import{l as B}from"./logo-exXQDy5k.js";import{H as q}from"./HeaderCoinSvg-CJL83Nx2.js";import{g as N}from"./getUser-DJBpJkua.js";import{S as H}from"./SlidingPanel-B1TXrPRi.js";const M="_catalog__section_p0z47_1",D="_catalog__header_p0z47_6",$="_reverse_p0z47_15",E="_catalog__button_p0z47_33",F="_catalog__image_p0z47_42",O="_catalog__list_p0z47_48",P="_category__caption_p0z47_53",Q="_catalog__title_p0z47_79",i={catalog__section:M,catalog__header:D,reverse:$,catalog__button:E,catalog__image:F,catalog__list:O,category__caption:P,catalog__title:Q};function R(t){return v.get(`${k}/api/shop/product-list/${t}/`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}}).then(a=>a.data).catch(a=>{console.log(a)})}const T="_catalog__item_xwmjs_1",U="_catalog__upper_xwmjs_19",G="_catalog__price_xwmjs_24",K="_catalog__info_xwmjs_32",L="_catalog__down_xwmjs_41",W="_catalog__img_xwmjs_47",X="_catalog__profession_xwmjs_56",Z="_catalog__prof_xwmjs_56",n={catalog__item:T,catalog__upper:U,catalog__price:G,catalog__info:K,catalog__down:L,catalog__img:W,catalog__profession:X,catalog__prof:Z},A="/assets/iconBook-Dt4xzM-P.png",J="/assets/sale5-BHXnLRWG.png",V="/assets/sale10-DNBte8BQ.png",p="/assets/useful_materials-Cfmv-Iql.png",x="/assets/miniCurs-DjvlySZB.png",Y="/assets/iconMerch-BICvc0cD.png",I=(t,a)=>{switch(t){case"Пройдите профтест на ....":return a(A);case"Скидка 5% на все курсы":return a(J);case"Скидка 10% на все курсы":return a(V);case"Python-разработчик":return a(p);case"Бизнес-аналитик":return a(p);case"Веб-дизайнер":return a(p);case"40 правил идеального текста для соцсетей":return a(p);case"Как найти клиентов фрилансеру":return a(p);case"Введение в программирование":return a(x);case"Введение в маркетинг":return a(x);case"Введение в дизайн":return a(x);case"Эксклюзивная байка":return a(Y)}},ss=t=>{if(typeof t=="number")return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},f=({id:t,name:a,price:c,description:r,prof:l})=>{const[h,u]=m.useState();return m.useEffect(()=>{I(a,u)},[a]),s.jsxs("li",{className:n.catalog__item,children:[s.jsxs("div",{className:n.catalog__upper,children:[s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"8px"},className:n.catalog__price,children:[c!=="Бесплатно"?s.jsx("img",{width:43,height:43,src:z,alt:"coin"}):null,ss(c)]}),s.jsx("h2",{className:n.catalog__info,children:a}),s.jsx("p",{className:n.catalog__prof,children:l})]}),s.jsxs("div",{className:n.catalog__down,children:[s.jsx("img",{className:n.catalog__img,src:h,alt:"предмет каталога"}),s.jsx("span",{className:n.catalog__profession,children:r})]})]},t)},as="_sliding__button_1fcgw_1",ts="_sliding__block_1fcgw_10",_s="_sliding__image_1fcgw_23",es="_sliding__title_1fcgw_27",is="_sliding__label_1fcgw_35",ns="_sliding__span_1fcgw_46",cs="_sliding__money_1fcgw_55",ls="_sliding__coins_1fcgw_61",o={sliding__button:as,sliding__block:ts,sliding__image:_s,sliding__title:es,sliding__label:is,sliding__span:ns,sliding__money:cs,sliding__coins:ls},os="/assets/sliding__catalog-_ahktps_.png",rs=({isOpen:t,onClose:a,initialHeight:c,fullHeight:r})=>{const l=j(N);return s.jsx(H,{darkened:!0,isOpen:t,onClose:a,initialHeight:c,fullHeight:r,children:s.jsxs("div",{className:o.sliding__block,children:[s.jsxs("div",{className:o.sliding__money,children:[s.jsx("img",{width:277,height:90,src:os,alt:""}),s.jsx("span",{className:o.sliding__coins,children:l==null?void 0:l.points_all})]}),s.jsx("h2",{className:o.sliding__title,children:"У тебя есть баллы!"}),s.jsx("p",{className:o.sliding__label,children:"Обменяй их на бонусы в нашем магазине"}),s.jsx("p",{className:o.sliding__span,children:"*Важно: когда ты тратишь баллы в магазине, твой рейтинг в лидерборде не меняется!"}),s.jsx("button",{onClick:a,className:o.sliding__button,children:"Понятно"})]})})},Ns=()=>{const{tg_id:t}=b(),a=j(N),[c,r]=m.useState(!1),l=y(),h=()=>{r(!1)},u=()=>{r(!0)},{data:g}=C({queryFn:()=>R(t),queryKey:["catalog"]},S),w=["Каталог","Скидки","Полезные материалы","Мини-курсы","Мерч"].filter(e=>e!=="Каталог");return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:i.catalog__section,children:[s.jsxs("div",{className:i.catalog__header,children:[s.jsx("button",{onClick:u,className:i.catalog__button,children:"Информация"}),s.jsx("img",{width:69,height:15,className:i.catalog__image,src:B,alt:""}),s.jsxs("p",{onClick:()=>l("/tasks"),className:i.reverse,children:[s.jsx("span",{children:a==null?void 0:a.points}),s.jsx(q,{})]})]}),s.jsx("h1",{className:i.catalog__title,children:"Каталог"}),s.jsxs("ul",{className:i.catalog__list,children:[g==null?void 0:g.shops.filter(e=>e.name==="Каталог").map(e=>e.products.map(_=>s.jsx(f,{prof:_.description,id:_.id,name:_.name,price:typeof _.price=="number"?"Бесплатно":_.price,description:e.description},_.id))),w.map(e=>s.jsxs(m.Fragment,{children:[s.jsx("li",{style:{margin:"30px 0"},children:s.jsx("h2",{className:i.category__caption,children:e})}),g==null?void 0:g.shops.filter(_=>_.name===e).map(_=>_.products.map(d=>s.jsx(f,{id:d.id,name:d.name,price:d.price,prof:d.description,description:_.description},d.id)))]},e))]})]}),s.jsx(rs,{fullHeight:"70vh",initialHeight:"70%",isOpen:c,onClose:h})]})};export{Ns as default};
