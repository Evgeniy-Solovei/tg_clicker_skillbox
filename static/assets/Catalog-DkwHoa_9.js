import{r as h,j as s,e as w,u as C,b as y}from"./index-ZWtHBrIM.js";import{i as k,u as v}from"./coin-BjymaXKy.js";import{a as S,b as z,q as B}from"./queryClient-DxFeriw2.js";import{l as q}from"./logo-exXQDy5k.js";import{H}from"./HeaderCoinSvg-BVGVBS17.js";import{g as N}from"./getUser-DJBpJkua.js";import{S as M}from"./SlidingPanel-BfQtTPUk.js";const D="_catalog__section_p0z47_1",O="_catalog__header_p0z47_6",$="_reverse_p0z47_15",E="_catalog__button_p0z47_33",F="_catalog__image_p0z47_42",P="_catalog__list_p0z47_48",L="_category__caption_p0z47_53",Q="_catalog__title_p0z47_79",n={catalog__section:D,catalog__header:O,reverse:$,catalog__button:E,catalog__image:F,catalog__list:P,category__caption:L,catalog__title:Q};function R(t){return S.get(`${z}/api/shop/product-list/${t}/`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}}).then(a=>a.data).catch(a=>{console.log(a)})}const T="_catalog__item_xwmjs_1",U="_catalog__upper_xwmjs_19",G="_catalog__price_xwmjs_24",K="_catalog__info_xwmjs_32",W="_catalog__down_xwmjs_41",X="_catalog__img_xwmjs_47",Z="_catalog__profession_xwmjs_56",A="_catalog__prof_xwmjs_56",c={catalog__item:T,catalog__upper:U,catalog__price:G,catalog__info:K,catalog__down:W,catalog__img:X,catalog__profession:Z,catalog__prof:A},J="/assets/iconBook-Dt4xzM-P.png",V="/assets/sale5-BHXnLRWG.png",Y="/assets/sale10-DNBte8BQ.png",p="/assets/useful_materials-Cfmv-Iql.png",f="/assets/miniCurs-DjvlySZB.png",I="/assets/iconMerch-BICvc0cD.png",ss=(t,a)=>{switch(t){case"Пройдите профтест на ....":return a(J);case"Cкидка 5% на все курсы":return a(V);case"Cкидка 10% на все курсы":return a(Y);case"Python-разработчик":return a(p);case"Бизнес-аналитик":return a(p);case"Веб-дизайнер":return a(p);case"40 правил идеального текста для соцсетей":return a(p);case"Как найти клиентов фрилансеру":return a(p);case"Введение в программирование":return a(f);case"Введение в маркетинг":return a(f);case"Введение в дизайн":return a(f);case"Эксклюзивная байка":return a(I)}},as=t=>{if(typeof t=="number")return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},j=({id:t,name:a,price:l,description:g,prof:o,link:m})=>{const[u,i]=h.useState();h.useEffect(()=>{ss(a,i)},[a]);const x=()=>{m&&(window.location.href=m)};return s.jsxs("li",{onClick:x,className:c.catalog__item,children:[s.jsxs("div",{className:c.catalog__upper,children:[s.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"8px"},className:c.catalog__price,children:[l!=="Бесплатно"?s.jsx("img",{width:43,height:43,src:k,alt:"coin"}):null,as(l)]}),s.jsx("h2",{className:c.catalog__info,children:a}),s.jsx("p",{className:c.catalog__prof,children:o})]}),s.jsxs("div",{className:c.catalog__down,children:[s.jsx("img",{className:c.catalog__img,src:u,alt:"предмет каталога"}),s.jsx("span",{className:c.catalog__profession,children:g})]})]},t)},ts="_sliding__button_1fcgw_1",_s="_sliding__block_1fcgw_10",es="_sliding__image_1fcgw_23",is="_sliding__title_1fcgw_27",ns="_sliding__label_1fcgw_35",cs="_sliding__span_1fcgw_46",ls="_sliding__money_1fcgw_55",os="_sliding__coins_1fcgw_61",r={sliding__button:ts,sliding__block:_s,sliding__image:es,sliding__title:is,sliding__label:ns,sliding__span:cs,sliding__money:ls,sliding__coins:os},rs="/assets/sliding__catalog-_ahktps_.png",gs=({isOpen:t,onClose:a,initialHeight:l,fullHeight:g})=>{const o=w(N);return s.jsx(M,{darkened:!0,isOpen:t,onClose:a,initialHeight:l,fullHeight:g,children:s.jsxs("div",{className:r.sliding__block,children:[s.jsxs("div",{className:r.sliding__money,children:[s.jsx("img",{width:277,height:90,src:rs,alt:""}),s.jsx("span",{className:r.sliding__coins,children:o==null?void 0:o.points_all})]}),s.jsx("h2",{className:r.sliding__title,children:"У тебя есть баллы!"}),s.jsx("p",{className:r.sliding__label,children:"Обменяй их на бонусы в нашем магазине"}),s.jsx("p",{className:r.sliding__span,children:"*Важно: когда ты тратишь баллы в магазине, твой рейтинг в лидерборде не меняется!"}),s.jsx("button",{onClick:a,className:r.sliding__button,children:"Понятно"})]})})},js=()=>{const{tg_id:t}=C(),a=w(N),[l,g]=h.useState(!1),o=y(),m=()=>{g(!1)},u=()=>{g(!0)},{data:i}=v({queryFn:()=>R(t),queryKey:["catalog"]},B),b=["Каталог","Скидки","Полезные материалы","Мини-курсы","Мерч"].filter(e=>e!=="Каталог");return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:n.catalog__section,children:[s.jsxs("div",{className:n.catalog__header,children:[s.jsx("button",{onClick:u,className:n.catalog__button,children:"Информация"}),s.jsx("img",{width:69,height:15,className:n.catalog__image,src:q,alt:""}),s.jsxs("p",{onClick:()=>o("/tasks"),className:n.reverse,children:[s.jsx("span",{children:a==null?void 0:a.points}),s.jsx(H,{})]})]}),s.jsx("h1",{className:n.catalog__title,children:"Каталог"}),s.jsxs("ul",{className:n.catalog__list,children:[i==null?void 0:i.shops.filter(e=>e.name==="Каталог").map(e=>e.products.map(_=>s.jsx(j,{prof:_.description,id:_.id,name:_.name,link:_.link,price:typeof _.price=="number"?"Бесплатно":_.price,description:e.description},_.id))),b.map(e=>s.jsxs(h.Fragment,{children:[s.jsx("li",{style:{margin:"30px 0"},children:s.jsx("h2",{className:n.category__caption,children:e})}),i==null?void 0:i.shops.filter(_=>_.name===e).map(_=>_.products.map(d=>s.jsx(j,{id:d.id,name:d.name,price:d.price,prof:d.description,description:_.description,link:d.link},d.id)))]},e))]})]}),s.jsx(gs,{fullHeight:"70vh",initialHeight:"70%",isOpen:l,onClose:m})]})};export{js as default};
