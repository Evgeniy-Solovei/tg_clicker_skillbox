import{u as b,j as a,e as p,r as h}from"./index-DKzTu5qG.js";import{i as u,u as f}from"./coin-AUe7oMr_.js";import{a as x,L as j,P as k}from"./PageUI-gXKNDzsJ.js";import{a as N,b as y,q as v}from"./queryClient-DadogInX.js";import{g as C}from"./getUser-DJBpJkua.js";import{S as q}from"./SlidingPanel-C2rQ_pA3.js";function O(e){return N.get(`${y}/api/top100/${e}/`).then(_=>_.data).catch(_=>{console.log(_)})}const L="_leader__section_jimd4_1",$="_leader__title_jimd4_6",F="_page__list_jimd4_16",c={leader__section:L,leader__title:$,page__list:F},H="/assets/sliding__prize-BXPTTzfC.webp",P="_sliding__button_ff7ql_1",S="_sliding__block_ff7ql_10",z="_sliding__image_ff7ql_22",I="_sliding__title_ff7ql_26",T="_sliding__label_ff7ql_36",d={sliding__button:P,sliding__block:S,sliding__image:z,sliding__title:I,sliding__label:T},w=({initialHeight:e,fullHeight:_,isOpen:r,onClose:t})=>{const{tg:l}=b();return a.jsx(q,{darkened:!0,initialHeight:e,fullHeight:_,isOpen:r,onClose:t,children:a.jsxs("div",{className:d.sliding__block,children:[a.jsx("img",{width:196,height:196,className:d.sliding__image,src:H,alt:""}),a.jsx("h3",{className:d.sliding__title,children:"Супер-приз ждет тебя!"}),a.jsx("p",{className:d.sliding__label,children:"15 декабря игрок, который наберет наибольшее количество баллов, получит супер-приз — iPhone 16!"}),a.jsx("button",{onClick:()=>{t(),l.HapticFeedback.impactOccurred("light")},className:d.sliding__button,children:"Ура!"})]})})},E="_leaderboard__item_10r0b_1",U="_back_10r0b_9",B="_leaderboard__avatar_10r0b_13",G="_leaderboard__name_10r0b_19",K="_leaderboard__coins_10r0b_27",M="_iconCoin_10r0b_35",Q="_leaderboard__index_10r0b_40",R="_leaderboard__gift_10r0b_47",i={leaderboard__item:E,back:U,leaderboard__avatar:B,leaderboard__name:G,leaderboard__coins:K,iconCoin:M,leaderboard__index:Q,leaderboard__gift:R},X=({id:e,name:_,points:r,index:t,openModal:l})=>{const{tg:o}=b();return a.jsxs("li",{className:t<=3?`${i.back} ${i.leaderboard__item}`:i.leaderboard__item,children:[a.jsx("span",{className:i.leaderboard__index,children:t}),a.jsx("img",{className:i.leaderboard__avatar,src:x,alt:"avatar"}),t===1&&a.jsx("button",{onClick:()=>{l(),o.HapticFeedback.impactOccurred("light")},className:i.leaderboard__gift,children:a.jsx(j,{className:i.leaderboard__svg})}),a.jsx("h2",{className:i.leaderboard__name,children:_}),a.jsx("p",{className:i.leaderboard__coins,children:r}),a.jsx("img",{className:i.iconCoin,src:u,alt:""})]},e)},Z=()=>{const e=p(C),{tg:_,tg_id:r}=b(),[t,l]=h.useState(!1),o=()=>{l(!1),_.HapticFeedback.impactOccurred("light")},g=()=>{l(!0),_.HapticFeedback.impactOccurred("light")},{data:s}=f({queryFn:()=>O(r),queryKey:["leaderboard"]},v);return a.jsxs(a.Fragment,{children:[a.jsx(k,{className:c.leader__section,className__title:c.leader__title,place:s==null?void 0:s.player_rank,name:e==null?void 0:e.name,coins:e==null?void 0:e.points_all,gift:Number(s==null?void 0:s.player_rank)===1,title:"Leaderboard",time:"До конца осталось: 12 дней 8 часов",isOpen:g,children:a.jsx("ul",{className:c.page__list,children:s==null?void 0:s.top_players.map((n,m)=>a.jsx(X,{openModal:g,index:m+1,id:n.tg_id,name:n.name,points:n.points},n.tg_id))})}),a.jsx(w,{isOpen:t,onClose:o,initialHeight:"70%",fullHeight:"70vh"})]})};export{Z as default};
