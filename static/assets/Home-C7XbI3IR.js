import{j as s,r as g,a as C,s as p,g as S,e as r,L as w,f as v}from"./index-vYAf0OhG.js";import{f as N}from"./friends__invite-Ds21nNo3.js";import{p as H,t as T,H as y,a as G,b as F}from"./ticket-De_hC-3e.js";import{g as f}from"./getUser-DJBpJkua.js";import{g as u}from"./getCurrTicket-unHkMUTY.js";import{S as $}from"./SlidingPanel-BlVI0RND.js";import"./Portal-CsGdle9j.js";const B="_home__section_1pmn5_1",M="_imgBoxy_1pmn5_6",j={home__section:B,imgBoxy:M},E=()=>s.jsx("svg",{width:"43",height:"43",viewBox:"0 0 43 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M14.2 21.6002C17.4884 21.6002 20.15 18.9386 20.15 15.6502C20.15 12.3618 17.4884 9.7002 14.2 9.7002C10.9116 9.7002 8.25 12.3618 8.25 15.6502C8.25 18.9386 10.9116 21.6002 14.2 21.6002ZM18.28 23.3002H17.8391C16.7341 23.8314 15.5069 24.1502 14.2 24.1502C12.8931 24.1502 11.6713 23.8314 10.5609 23.3002H10.12C6.74125 23.3002 4 26.0414 4 29.4202V30.9502C4 32.358 5.14219 33.5002 6.55 33.5002H21.85C23.2578 33.5002 24.4 32.358 24.4 30.9502V29.4202C24.4 26.0414 21.6588 23.3002 18.28 23.3002ZM29.5 21.6002C32.3156 21.6002 34.6 19.3158 34.6 16.5002C34.6 13.6846 32.3156 11.4002 29.5 11.4002C26.6844 11.4002 24.4 13.6846 24.4 16.5002C24.4 19.3158 26.6844 21.6002 29.5 21.6002ZM32.05 23.3002H31.8481C31.1097 23.5552 30.3288 23.7252 29.5 23.7252C28.6713 23.7252 27.8903 23.5552 27.1519 23.3002H26.95C25.8663 23.3002 24.8675 23.6136 23.9909 24.1183C25.2872 25.5155 26.1 27.3696 26.1 29.4202V31.4602C26.1 31.5771 26.0734 31.6886 26.0681 31.8002H35.45C36.8578 31.8002 38 30.658 38 29.2502C38 25.9618 35.3384 23.3002 32.05 23.3002Z",fill:"#191E26"})}),I="_home__grid_9o10g_1",P="_home__title_9o10g_38",Z="_home__label_9o10g_46",L="_home__link_9o10g_58",O="_reverse_9o10g_82",V="_tickets__switcher_9o10g_91",A="_home__ticket_9o10g_113",D="_home__info_9o10g_122",Q="_label__tickets_9o10g_130",R="_active_9o10g_143",U="_active_blue_9o10g_154",X="_imgTicket_9o10g_165",q="_home__task_nav_9o10g_170",t={home__grid:I,home__title:P,home__label:Z,home__link:L,reverse:O,tickets__switcher:V,home__ticket:A,home__info:D,label__tickets:Q,active:R,active_blue:U,imgTicket:X,home__task_nav:q};function b(e){return e===1?"билет":e>=2&&e<5?"билета":"билетов"}const z=({user:e})=>{const[i,_]=g.useState("regular"),l=C();return g.useEffect(()=>{l(p(!0))},[]),s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:`${i==="premium"?`${t.label__tickets} ${t.active_blue}`:t.label__tickets}`,htmlFor:"premium-tickets",children:[s.jsx("span",{className:t.home__ticket,children:e==null?void 0:e.premium_tickets}),s.jsx("span",{className:t.home__info,children:e&&b(e==null?void 0:e.premium_tickets)}),s.jsx("img",{className:t.imgTicket,src:H,alt:""}),s.jsx("input",{checked:i==="premium",onChange:()=>{_("premium")},onClick:()=>{l(S(!1))},name:"tickets",type:"radio"})]}),s.jsxs("label",{className:`${i==="regular"?`${t.label__tickets} ${t.active}`:t.label__tickets}`,htmlFor:"tickets",children:[s.jsx("span",{className:t.home__ticket,children:e==null?void 0:e.tickets}),s.jsx("span",{className:t.home__info,children:e&&b(e==null?void 0:e.tickets)}),s.jsx("img",{className:t.imgTicket,src:T,alt:""}),s.jsx("input",{checked:i==="regular",onChange:()=>{_("regular")},onClick:()=>{l(p(!0))},id:"tickets",name:"tickets",type:"radio"})]})]})},J=[{id:1,title:"Лидерборд",path:"leaderboard",svg:s.jsx(y,{})},{id:2,title:"Каталог",path:"catalog",svg:s.jsx(G,{}),reverse:!0},{id:3,title:"Задания",path:"tasks",svg:s.jsx(F,{className:t.home__task_nav}),reverse:!0},{id:4,title:"Друзей",path:"friends",svg:s.jsx(E,{})}],K=()=>{const e=r(f);return s.jsxs("ul",{className:t.home__grid,children:[J.map(i=>s.jsx("li",{children:s.jsxs(w,{className:t.home__link,to:i.path,children:[i.title==="Лидерборд"&&s.jsxs("p",{className:t.home__label,children:["#",e==null?void 0:e.rank]}),i.title==="Друзей"&&s.jsx("p",{className:t.home__label,children:e==null?void 0:e.friends_count}),s.jsxs("div",{className:i.reverse?t.reverse:void 0,children:[s.jsx("p",{className:t.home__title,children:i.title}),i.svg]})]})},i.id)),s.jsx("li",{className:t.tickets__switcher,children:s.jsx(z,{user:e})})]})},W="_sliding__block_14ss6_1",Y="_sliding__panel_14ss6_14",ss="_sliding__title_14ss6_21",es="_sliding__label_14ss6_32",is="_sliding__go_14ss6_41",ts="_sliding__inst_14ss6_53",_s="_sliding__panel_second_14ss6_65",ns="_img__second_14ss6_72",ls="_second__block_14ss6_80",cs="_sliding__label_second_14ss6_96",n={sliding__block:W,sliding__panel:Y,sliding__title:ss,sliding__label:es,sliding__go:is,sliding__inst:ts,sliding__panel_second:_s,img__second:ns,second__block:ls,sliding__label_second:cs},as="/assets/icon2-CX3eQUw3.png",os="/assets/icon3-Dw-xrFQP.png",ds=[{id:1,img:N,buttonGo:"Нет, играть",buttonInst:"Посмотреть правила",title:"Рассказать правила игры?"},{id:2,img:as,buttonNext:"Дальше",label:"Тапаешь белую S = +1 балл Тапаешь синюю S = -3 балла Синяя S падает в Boxy = +3 балла"},{id:3,img:os,buttonGo:"Понятно",label:"Тапаешь зелье = +15 секунд Тапаешь бомбочку = -10 баллов"}],gs=({item:e,handleStart:i,handleNext:_})=>s.jsxs("div",{className:n.sliding__panel,children:[s.jsx("img",{width:215,height:215,src:e.img,alt:""}),s.jsx("h2",{className:n.sliding__title,children:e.title}),s.jsx("p",{className:n.sliding__label,children:e.label}),s.jsx("button",{onClick:i,className:n.sliding__go,children:e.buttonGo}),s.jsx("button",{className:n.sliding__inst,onClick:_,children:e.buttonInst})]},e.id),rs=({item:e,handleNext:i})=>s.jsxs("div",{className:n.sliding__panel_second,children:[s.jsx("img",{width:"100%",height:510,className:n.img__second,src:e.img,alt:""}),s.jsxs("div",{className:n.second__block,children:[s.jsx("p",{className:n.sliding__label_second,children:e.label}),s.jsx("button",{onClick:i,className:n.sliding__go,children:e.buttonNext})]})]},e.id),ms=({item:e,handleGo:i})=>s.jsxs("div",{className:n.sliding__panel_second,children:[s.jsx("img",{width:"100%",height:510,className:n.img__second,src:e.img,alt:""}),s.jsxs("div",{className:n.second__block,children:[s.jsx("p",{className:n.sliding__label_second,children:e.label}),s.jsx("button",{onClick:i,className:n.sliding__go,children:e.buttonGo})]})]},e.id),hs=({isOpen:e,onClose:i,fullHeight:_,initialHeight:l,user:c})=>{const[o,d]=g.useState(1),m=r(u),h=1,k=v(),x=()=>{c&&((c==null?void 0:c.tickets)>0&&m===!0||c.premium_tickets>0&&m===!1)&&k("game")};return s.jsx(s.Fragment,{children:s.jsx($,{initialHeight:l,fullHeight:_,darkened:!0,isOpen:e,onClose:i,children:s.jsx("div",{className:n.sliding__block,children:ds.slice((o-1)*h,o*h).map(a=>{switch(a.id){case 1:return s.jsx(gs,{item:a,handleStart:x,handleNext:()=>d(o+1)},a.id);case 2:return s.jsx(rs,{item:a,handleNext:()=>d(o+1)},a.id);case 3:return s.jsx(ms,{item:a,handleGo:x},a.id);default:return null}})})})})},fs=()=>{const[e,i]=g.useState(!1),_=r(f),l=v(),c=r(u),o=()=>{_&&(_!=null&&_.instruction?i(!0):((_==null?void 0:_.tickets)>0&&c===!0||_.premium_tickets>0&&c===!1)&&l("game"))},d=()=>{i(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:j.home__section,children:[s.jsx(K,{}),s.jsx("img",{onClick:o,className:j.imgBoxy,src:N,alt:"скиллбокс"})]}),s.jsx(hs,{user:_,fullHeight:"75vh",initialHeight:"75%",onClose:d,isOpen:e})]})};export{fs as default};
